{"pages":[{"title":"404","text":"æ‰¾ä¸åˆ°æ­¤é é¢5 ç§’å¾Œè¿”å›é¦–é  è¿”å›é¦–é  .navbar, .article-meta.columns.is-variable.is-1.is-multiline.is-mobile.is-size-7-mobile, .footer { display: none; } .container { position: fixed; left: 50%; top: 50%; transform: translate(-50%, -50%); text-align: center; } h1.is-size-3 { font-size: 3rem !important; color: rgb(27, 102, 85); } .headerlink { display: none; } h3:hover::before { display: none; } .content p:not(:last-child) { margin-bottom: 2rem; } p a { padding: 0.35rem 1rem; background-color: rgb(30, 160, 142); color: white; border-radius: 20px; } p a:hover { color: white; } let countTime = 5; function count() { document.getElementById('timeout').textContent = countTime; countTime -= 1; if(countTime === 0){ location.href = 'https://clairechang0609.github.io/'; } setTimeout(() => { count(); }, 1000); } count();","link":"/404.html"}],"posts":[{"title":"Nuxt.js ç›®éŒ„çµæ§‹","text":"ç‰ˆæœ¬ï¼šnuxt 2.15.8 ä½¿ç”¨ create-nuxt-app å®‰è£å®Œæˆå¾Œï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹çš„è³‡æ–™å¤¾çµæ§‹ï¼š assets, layouts, middleware, mixins, plugins ä»¥ä¸Šè³‡æ–™å¤¾åœ¨ç•¶å‰ç‰ˆæœ¬æ˜¯éœ€è¦æ‰‹å‹•å»ºç½®çš„ï¼Œ ä¾ç…§é †åºä»‹ç´¹å„è³‡æ–™å¤¾åŠŸèƒ½ï¼š assetsè·Ÿ Vue å°ˆæ¡ˆç›¸åŒï¼Œç”¨ä¾†å­˜æ”¾åƒæ˜¯ css, scss, images éœ€è¦è¢« webpack ç·¨è­¯çš„éœæ…‹è³‡æºï¼Œå¦‚ä¸éœ€è¢«ç·¨è­¯ï¼Œå‰‡å­˜æ”¾æ–¼ staticã€‚ componentsè‡ªè¨‚çš„å…ƒä»¶æª”ï¼Œä¾‹å¦‚æˆ‘å€‘å¸¸æœƒå»ºç«‹å…±ç”¨çš„ Navbar.vue, Sidebar.vue â€¦ï¼Œé€šå¸¸ç‚ºå¤§å¯«å‘½åï¼Œç„¶å¾Œåœ¨éœ€è¦çš„é é¢å¼•å…¥è©²æª”æ¡ˆå³å¯ä½¿ç”¨ï¼Œä½¿ç”¨æ–¹å¼åŸºæœ¬ä¸Šè·Ÿ Vue å°ˆæ¡ˆç›¸åŒã€‚ å¦‚æœä¸æƒ³è¦å€‹åˆ¥å¼•å…¥å…ƒä»¶ï¼ŒNuxt ä¹Ÿæœ‰æä¾›å¾ˆä¾¿åˆ©çš„ä½œæ³•ï¼Œåªè¦åœ¨ nuxt.config.js æª”å…§è¨­å®šï¼š // nuxt.config.jsexport default { components: true} å°±æœƒå…¨å±€å¼•å…¥å…ƒä»¶ï¼Œä½¿ç”¨æ–¹å¼åªè¦éµå¾ªè³‡æ–™å¤¾çµæ§‹è¼¸å…¥å…ƒä»¶åç¨±å°±å¯ä»¥äº† ç¯„ä¾‹ï¼š å…ƒä»¶è·¯å¾‘ï¼šcomponents/home/Banner.vue ä½¿ç”¨å…ƒä»¶ï¼š&lt;HomeBanner&gt;&lt;/HomeBanner&gt; layoutså…±ç”¨æ¨¡æ¿ã€‚ å¤§å®¶é‚„è¨˜å¾—åœ¨ Vue å°ˆæ¡ˆä¸‹ï¼Œåªè¦åœ¨ App.vueï¼Œæˆ–æ˜¯åœ¨ router å»ºç«‹ä¸€å€‹å·¢ç‹€è·¯ç”±ï¼Œå¤–å±¤è¨­å®šå…±ç”¨å®¹å™¨ï¼Œå†å°‡åµŒå¥—è·¯ç”±æ”¾å…¥ childrenï¼Œå­è·¯ç”±å°±å¯ä»¥å…±äº«å¤–å±¤æ¨¡æ¿ export default [ { path: '/products', component: Product, children: [ { path: 'food', component: Food }, { path: 'drink', component: Drink } ] }] ä½†æ˜¯åœ¨ Nuxt æ¶æ§‹ä¸‹ï¼Œä¸¦ä¸å­˜åœ¨ App.vue é€™éš»æª”æ¡ˆï¼Œrouter ä¹Ÿæœƒè‡ªå‹•é…ç½®ï¼Œé‚£è©²æ€éº¼åšåˆ°æ¨¡æ¿å…±ç”¨å‘¢ï¼Ÿå…¶å¯¦å¾ˆç°¡å–®ï¼Œåªè¦åœ¨ layouts è³‡æ–™å¤¾å…§ï¼Œæ–°å¢ default.vue æª”ï¼Œé è¨­æ‰€æœ‰ pages å…§çš„æª”æ¡ˆéƒ½æœƒå…±äº«è©²ç‰ˆé¢ // default.vue&lt;template&gt; &lt;div class=\"default-wrap\"&gt; &lt;Navbar /&gt; &lt;Nuxt /&gt; &lt;Footer /&gt; &lt;/div&gt;&lt;/template&gt; &lt;Nuxt /&gt; é¡ä¼¼ Vue çš„ &lt;router-view /&gt; ï¼ˆåµŒå¥—è·¯ç”±ï¼‰ å¦‚æœæƒ³è¦æ–°å¢æ›´å¤šæ¨¡æ¿ï¼Œåªè¦åœ¨ layouts å…§æ–°å¢æª”æ¡ˆï¼Œä¾‹å¦‚ layouts/products.vueï¼Œåœ¨æ¬²ä½¿ç”¨çš„é é¢å¼•å…¥ï¼Œè©²é å°±å¯ä»¥è®€åˆ° layouts/products.vue æ¨¡æ¿ // pages/food.vueexport default { layout: 'products'} middlewareå‰é¢æœ‰èªªåˆ° Nuxt å°ˆæ¡ˆæœƒè‡ªå‹•ä¾ pages å…§çš„è³‡æ–™å¤¾çµæ§‹ç”¢ç”Ÿå°æ‡‰çš„éœæ…‹/å‹•æ…‹è·¯ç”±ï¼Œ ä½†å¦‚æœèªªæˆ‘å€‘æƒ³è¦ä½¿ç”¨ è·¯ç”±å®ˆè¡›(Navigation Guards) ä¾†é€²è¡Œè·¯ç”±ç›£è½ï¼Œåƒæ˜¯ Vue router å…§çš„ beforeEach callbackï¼Œè©²æ€éº¼åšå‘¢ï¼Ÿ Vue å°ˆæ¡ˆï¼š// pages/food.vueconst router = new VueRouter({ mode: 'history', routes});router.beforeEach(async (to, from, next) =&gt; { if (!store.permissions.includes(route.path)) { next({ statusCode: 403 }); } next();});export default router; Nuxt å°ˆæ¡ˆï¼šæˆ‘å€‘å¯ä»¥æ‰‹å‹•å»ºç«‹ä¸€å€‹ middleware è³‡æ–™å¤¾ï¼Œåœ¨è£¡é¢æ–°å¢è¦é€²è¡Œè·¯ç”±ç›£è½çš„æª”æ¡ˆ routeAuth.js // middleware/routeAuth.jsexport default ({ from, route, redirect, store, error }) =&gt; { if (!store.isLogin) { redirect('/login'); } if (!store.permissions.includes(route.path)) { error({ statusCode: 403 }); }}; ç„¶å¾Œåœ¨éœ€è¦é€²è¡Œç›£è½çš„æª”æ¡ˆåŠ å…¥ middleware // layouts/default.vueexport default { middleware: 'routeAuth', data() { return {}; }} æˆ–æ˜¯åœ¨ nuxt.config.js è¨­å®šå…¨åŸŸç›£è½ // nuxt.config.jsexport default { router: { middleware: [ 'routeAuth' ] }} mixinsmixins æä¾›å½ˆæ€§æ–¹å¼è®“é é¢å¯ä»¥é‡è¤‡ä½¿ç”¨æ–¹æ³•ï¼Œå¯ä»¥åŒ…å«ä»»ä½• Vue çµ„ä»¶é …ç›®(data, computed, watch, ç”Ÿå‘½é€±æœŸ)ï¼Œå°‡å…±ç”¨æ–¹æ³•åŒ…è£é€²å»ï¼Œé¦–å…ˆåœ¨ mixins æ–°å¢æª”æ¡ˆ mixins/utils.js // mixins/utils.jsexport default { data() { return { number: 0 }; } methods: { count() { this.number++; } }}; å…¨åŸŸè¨»å†Šï¼šå…¨åŸŸå®£å‘Š mixin å‹™å¿…å°å¿ƒä½¿ç”¨ï¼Œå› ç‚ºæœƒå½±éŸ¿åˆ°æ‰€æœ‰ Vue æª”(pages, components) åœ¨ mixins æ–°å¢ä¸€æ”¯æª”æ¡ˆ global-mixins.jsï¼Œå°‡æ¬²å…¨åŸŸè¨»å†Šçš„æª”æ¡ˆåŠ å…¥ Vue å¯¦ä¾‹ // mixins/global-mixins.jsimport Vue from 'vue';import utils from '@/mixins/utils';// é¿å…é‡è¤‡è¨»å†Šif (!Vue.__utils_mixin__) { Vue.__utils_mixin__ = true; Vue.mixin(utils);} æ¥è‘—åŠ å…¥ nuxt.config.js å…§ // nuxt.config.jsexport default { plugins:[ { src: '@/mixins/global-mixins' } ]} å±€éƒ¨è¨»å†Šï¼šå±€éƒ¨è¨»å†Šå¾ˆç°¡å–®ï¼Œåªè¦åœ¨æ¬²ä½¿ç”¨æª”æ¡ˆå¼•å…¥å³å¯ï¼Œé€™è£¡å‡è¨­åœ¨ pages/about.vue // pages/about.vueimport utils from '@/mixins/utils';export default { name: 'About', mixins:[ utils ]} é€™æ¨£åœ¨ About é é¢å°±å¯ä»¥å–å¾—åƒæ•¸ number çš„å€¼è·Ÿå‘¼å« count() æ–¹æ³•å›‰ï¼ pagesä¸»è¦çš„é é¢æª”æ¡ˆï¼ŒNuxt å°ˆæ¡ˆæœƒè‡ªå‹•ä¾ç…§ pages å…§çš„è³‡æ–™å¤¾çµæ§‹é…ç½®è·¯ç”±ï¼Œ æ›å¥è©±èªªï¼Œå°±ä¸éœ€è¦åƒ Vue å°ˆæ¡ˆä¸€æ¨£éœ€è¦è‡ªè¡Œè¨­å®š vue-routerï¼Œç‚ºå°å¯«å‘½åï¼ˆå‘½åæœƒç›´æ¥æ˜¯è·¯å¾‘åç¨±ï¼‰ï¼Œæ¯å€‹ .vue æª”éƒ½æ˜¯å·²ç¶“è¢«è¨»å†Šçš„é é¢ ä»¥é¦–é ç‚ºä¾‹ï¼špages/index.vue â†’ http://localhost:3000 å·¢ç‹€è·¯ç”±ï¼š ç›´æ¥èˆ‰ä¾‹ï¼Œå…ˆå»ºç«‹ä¸€æ”¯æª”æ¡ˆ pages/about.vue // pages/about/index.vue&lt;template&gt; &lt;div&gt; aboutï¼š &lt;nuxt-child /&gt; &lt;/div&gt;&lt;/template&gt; æ¥åœ¨ about è³‡æ–™å¤¾æ–°å¢å…©éš»æª”æ¡ˆï¼Œå¯å–å¾—é…ç½®çš„å·¢ç‹€è·¯å¾‘å¦‚ä¸‹ pages/about/index.vue â†’ http://localhost:3000/about pages/about/claire.vue â†’ http://localhost:3000/about/claire å‹•æ…‹è·¯ç”±ï¼š å¦‚æœæƒ³è¦é¡¯ç¤ºå‹•æ…‹è·¯ç”±ï¼Œåªè¦åœ¨æª”åå‰åŠ ä¸Šä¸‹åº•ç·šå°±å¯ä»¥äº†ï¼š pages/about/ _name.vue â†’ http://localhost:3000/about/claire é€™æ¨£å°±å¯ä»¥åœ¨æª”æ¡ˆå…§å–å¾—å‹•æ…‹è·¯ç”±åƒæ•¸ // pages/about/_name.vueexport default { created () { console.log(this.$route.params.name); }} pluginsNuxt æ’ä»¶ï¼Œæ–¼ Vue.js åŸ·è¡Œå‰å¼•å…¥ç¬¬ä¸‰æ–¹å¥—ä»¶ï¼Œä»¥ vue-notification ç‚ºä¾‹ é¦–å…ˆä½¿ç”¨ npm å®‰è£ npm i vue-notification ç„¶å¾Œåœ¨ plugins è³‡æ–™å¤¾æ–°å¢ notification.js æª” // plugins/notification.jsimport Vue from 'vue';import Notifications from 'vue-notification';Vue.use(Notifications); åœ¨ nuxt.config.js é…ç½® plugins // nuxt.config.jsexport default { plugins: [ { src: '@/plugins/notification.js' } ]} å°±å¯ä»¥åœ¨æ‰€æœ‰é é¢ä¸­ä½¿ç”¨è©²å¥—ä»¶ &lt;Notifications&gt;&lt;/Notifications&gt; staticéœæ…‹è³‡æºè³‡æ–™å¤¾ï¼Œç”¨ä¾†å­˜æ”¾ä¸éœ€è¦è¢«ç·¨è­¯çš„æª”æ¡ˆï¼Œåƒæ˜¯åœ–ç‰‡æª”ï¼Œæˆ–æ˜¯å¯ä»¥ä¾›ä½¿ç”¨è€…ä¸‹è¼‰çš„ç¯„ä¾‹æª”ç­‰ï¼Œå¦‚éœ€è¢«ç·¨è­¯ï¼Œå‰‡å­˜æ”¾æ–¼ assetsã€‚ storeæ”¾ç½® Vuex ç‹€æ…‹ç®¡ç†å·¥å…·ï¼Œç”¨ä¾†å­˜æ”¾å…¨åŸŸå…±ç”¨çš„æ–¹æ³•ã€è³‡æ–™ï¼Œä½¿ç”¨æ–¹å¼èˆ‡ Vue å¤§è‡´ç›¸åŒï¼ŒVuex åœ¨ä½¿ç”¨æ™‚æœƒç¢°åˆ°ä¸€å€‹å•é¡Œï¼Œç•¶é é¢é‡æ–°æ•´ç†ï¼Œå…¶æœƒè¢«é‚„åŸç‚ºåˆå§‹ç‹€æ…‹ï¼Œè‡³æ–¼è¦æ€éº¼è§£æ±ºé€™å€‹å•é¡Œï¼Œå¾ŒçºŒæœƒå–®ç¨ä»‹ç´¹ã€‚ åƒè€ƒæ–‡ç« ï¼š https://israynotarray.com/vue/20211011/3406447097/ https://dev.to/husteadrobert/how-to-use-global-navigation-guards-with-nuxt-middleware-and-why-you-absolutely-should-not-7bl https://ithelp.ithome.com.tw/articles/10207822 https://medium.com/@seyijosh44/how-to-use-mixins-in-nuxt-js-826724fa251","link":"/2022/11/17/nuxt/nuxt-catalog/"},{"title":"Nuxt.js æ­é… Axios èˆ‡è‡ªè¨‚ Error Page","text":"ç‰ˆæœ¬ï¼šnuxt 2.15.8 Axios æ˜¯ä¸€å¥—ç›¸ç•¶ä¾¿åˆ©çš„ Promise Base Ajax å¥—ä»¶ï¼Œè€Œ Nuxt åˆæœ‰ Axios æ•´åˆå¥—ä»¶ @nuxtjs/axiosï¼Œæ­¤ç¯‡ç¯„ä¾‹æœƒä½¿ç”¨åˆ° Asyncã€Awaitï¼Œå¦‚æœå°æ–¼ Promise å°šä¸ç†Ÿæ‚‰ï¼Œå¯ä»¥åƒè€ƒ Promise ä»‹ç´¹æ–‡ç«  é‚£å€‘æˆ‘å€‘å°±ä¾†æ›¿å°ˆæ¡ˆåŠ ä¸Š axios å§ï¼é¦–å…ˆåŸ·è¡Œ npm install @nuxtjs/axios æ¥è‘—åœ¨ nuxt.config.js é€²è¡Œé…ç½®ï¼ˆåƒæ•¸é¸é …ï¼‰ï¼š // nuxt.config.jsexportdefault { modules: [ '@nuxtjs/axios' ], axios: { baseUrl: process.env.SERVER_URL, browserBaseURL: process.env.BASE_URL, credentials: true }} å¦‚æœéœ€è¦å€åˆ† client è·Ÿ server ç«¯ base urlï¼Œå¯ä»¥å¦å¤–è¨­å®š browserBaseURLï¼ˆæ–¼client ç«¯æœƒè¦†å¯« baseUrlï¼‰ï¼Œå¥—ä»¶å°‡ axios æ–¹æ³•ç›´æ¥ æ³¨å…¥(inject) è‡³ Vue å¯¦ä¾‹ï¼Œæ“·å–å¥—ä»¶åŸå§‹ç¢¼ç‰‡æ®µ // node_modules/@nuxtjs/axios/lib/plugin.js// Inject axios to the context as $axiosctx.$axios = axiosinject('axios', axios) å› æ­¤åœ¨ Vue ç”Ÿå‘½é€±æœŸæˆ–å±¬æ€§ä½¿ç”¨ this.$axios å³å¯å‘¼å« axios æ–¹æ³•ï¼Œé‚£éº½åœ¨ Nuxt ç”Ÿå‘½é€±æœŸå‘¢ï¼Ÿ Nuxt ç”Ÿå‘½é€±æœŸï¼ˆasyncData, fetch, plugins, middlewareï¼‰æœƒè‡ªå‹•å¸¶å…¥ context åƒæ•¸ï¼Œcontext åŒ…å«ä»¥ä¸‹åƒæ•¸ / ç‰©ä»¶ï¼š const { $axios app, store, route, params, query, env, isDev, isHMR, redirect, error, $config} = context ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼ˆç¯„ä¾‹ä½¿ç”¨ asyncDataï¼‰ // pages/about.vueexport default { async asyncData(context) { const { seo } = await context.$axios.$get('/api/seo'); return { seo }; }} æˆ‘å€‘ä¹Ÿå¯ä»¥ç‰©ä»¶è§£æ§‹æ–¹å¼ä½¿ç”¨ $axios // pages/about.vueexport default { async asyncData({ $axios }) { const { seo } = await $axios.$get('/api/seo'); return { seo }; }} axios æä¾›ä»¥ä¸‹æ–¹æ³•é€²è¡Œäº‹ä»¶æ•æ‰ï¼š onRequest(config) onResponse(response) onError(err) onRequestError(err) onResponseError(err) å¦‚æœæˆ‘å€‘æƒ³è¦å…¨åŸŸè¨»å†Šæ””æˆªå™¨(Interceptors) é€²è¡Œ api è«‹æ±‚æˆ–æ˜¯éŒ¯èª¤æ•æ‰ï¼Œä¹Ÿå¾ˆç°¡å–®ï¼Œ é¦–å…ˆåœ¨ plugins æ–°å¢æª”æ¡ˆï¼Œé€™è£¡å‘½åç‚º axios.jsï¼Œæ¥è‘—åœ¨è£¡é¢ç›£è½æƒ³æ•æ‰çš„äº‹ä»¶æ–¹æ³• // plugins/axios.jsexport default ({ $axios, redirect, store }) =&gt; { $axios.onRequest(config =&gt; { console.log('on request', config.url); }); $axios.onError(error =&gt; { const code = parseInt(error.response &amp;&amp; error.response.status); if (code === 401) { redirect('/login'); } });}; æ¥è‘—åœ¨ nuxt.config.js plugins é€²è¡Œæ“´å…… // nuxt.config.jsexport default { plugins: [ { src: '@/plugins/axios' } ]} axios åœ¨ç™¼ç”ŸéŒ¯èª¤æ™‚ï¼Œé è¨­æœƒå°åˆ° error pageï¼Œå¦‚æœæˆ‘å€‘æƒ³é¿å…ç•«é¢è·³è½‰ï¼Œå¯ä»¥åŠ å…¥ resolve promiseï¼Œé€™æ¨£åœ¨ç™¼ç”ŸéŒ¯èª¤æ™‚ï¼Œéƒ½ä¸æœƒè·³è½‰åˆ° error page // plugins/axios.jsexport default ({ $axios, redirect, store }) =&gt; { $axios.onError(error =&gt; { const code = parseInt(error.response &amp;&amp; error.response.status); if (code === 401) { redirect('/login'); } return Promise.resolve(false); // é¿å…ç•«é¢è½‰å°éŒ¯èª¤é  });}; å¦‚æœå…¨åŸŸè¨­å®š resolve promiseï¼Œåœ¨ axios ç™¼ç”ŸéŒ¯èª¤æ™‚ï¼Œéƒ½ä¸æœƒé€²åˆ° catch error æ­ï¼ è‡ªè¨‚ Error Page Nuxt å°ˆæ¡ˆæœ‰é è¨­çš„ error pageï¼Œå¯ä»¥åœ¨ .nuxt è³‡æ–™å¤¾çœ‹åˆ° components/nuxt-error.vueï¼ŒéŒ¯èª¤é é¢ä¹Ÿå¯ä»¥è‡ªè¨‚ï¼Œæª”æ¡ˆæ”¾ç½®ä½ç½®æ¯”è¼ƒç‰¹åˆ¥ï¼Œåœ¨ layouts è³‡æ–™å¤¾å…§æ–°å¢ä¸€æ”¯æª”æ¡ˆ error.vue // layouts/error.vue&lt;template&gt; &lt;div class=\"nuxt-error-wrap\"&gt; &lt;div class=\"text-center py-4\"&gt; &lt;h2&gt;{{ error.statusCode }}&lt;/h2&gt; &lt;h3&gt;{{ error.message }}&lt;/h3&gt; &lt;/div&gt; &lt;nuxt-link to=\"/\" class=\"btn btn-primary p-4\"&gt;å›é¦–é &lt;/nuxt-link&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default { name: 'ErrorPage', layout: 'error-layout', props: { error: { type: Object, default: () =&gt; {} } }};&lt;/script&gt; é›–ç„¶ error.vue æª”ç½®æ–¼ layouts è³‡æ–™å¤¾ï¼Œä½†è¦–ç‚º pages é é¢ï¼Œå› æ­¤å¦‚æœæ²’æœ‰é…ç½® layoutï¼Œé è¨­æœƒè®€å– layouts/default.vue æ¨£æ¿ é€™æ¨£å°±å®Œæˆäº†ï¼Œåœ¨ Nuxt ç™¼ç”ŸéŒ¯èª¤æ™‚ï¼Œéƒ½æœƒé€²åˆ°æˆ‘å€‘è‡ªè¨‚éŒ¯èª¤é é¢ï¼Œå¦‚æœè¦æ‰‹å‹•é€²åˆ°éŒ¯èª¤é ï¼Œå‘¼å« context å…§çš„ error æ–¹æ³•å³å¯ï¼Œåœ¨ Nuxt ç”Ÿå‘½é€±æœŸï¼š // pages/about.vueexport default { async asyncData({ $axios, error }) { try { const { seo } = await $axios.$get('/api/seo'); return { seo }; } catch(err) { const { statusCode, message } = err; error({ statusCode, message }); } }} åœ¨ Vue ç”Ÿå‘½é€±æœŸæˆ–å±¬æ€§ï¼Œä½¿ç”¨ this.$nuxt.error() å°±å¯ä»¥å›‰ï¼ // pages/about.vueexport default { methods: { async getSeo() { try { const { seo } = await this.$axios.$get('/api/seo'); this.seo = seo; } catch(err) { const { statusCode, message } = err; this.$nuxt.error({ statusCode, message }); } } }} åƒè€ƒæ–‡ç« ï¼š https://ithelp.ithome.com.tw/articles/10208852 https://mavrickmaster.medium.com/custom-error-pages-with-nuxt-js-3c70e6c51aff","link":"/2022/11/21/nuxt/nuxt-axios/"},{"title":"Nuxt.js å¥—ä»¶æ‡‰ç”¨ï¼šCKEditor 5 æ–‡å­—ç·¨è¼¯å™¨","text":"ç‰ˆæœ¬ï¼šnuxt 2.15.8 CKEditor æ˜¯ä¸€å¥—æ­·å²æ‚ ä¹…ä¸”åŠŸèƒ½å®Œæ•´ã€è¼•é‡çš„å¯Œæ–‡æœ¬ç·¨è¼¯å™¨ï¼ˆrich text editorï¼‰ï¼Œç‚ºä½¿ç”¨è€…æä¾›æ‰€è¦‹å³æ‰€å¾—ï¼ˆWYSIWYGï¼‰çš„ç·¨è¼¯å€åŸŸï¼ŒCKEditor 5 èˆ‡èˆŠç‰ˆä¸åŒï¼Œä½¿ç”¨ MVC æ¶æ§‹ã€ES6 ç·¨å¯«ã€UI ç°¡æ½”ï¼Œä¸”å› æ‡‰ç¾åœ¨çš„å‰å¾Œç«¯åˆ†é›¢è¶¨å‹¢ï¼Œèˆ‡å‰ç«¯æ¡†æ¶ Reactã€Angularã€and Vue.js åšæ•´åˆï¼Œè®“æˆ‘å€‘å¯ä»¥æ›´ä¾¿åˆ©çš„é–‹ç™¼æ‡‰ç”¨ã€‚ é‚£éº¼æˆ‘å€‘å°±é–‹å§‹åœ¨ Nuxt å°ˆæ¡ˆä½¿ç”¨ CKEditor 5 å§ï¼Œé¦–å…ˆé¸æ“‡ç·¨è¼¯å™¨é¡å‹ï¼ˆé€™è£¡ä½¿ç”¨ Classic editorï¼‰ï¼Œå¯ä»¥é€éå…©ç¨®æ–¹å¼å®‰è£ï¼š Adding a plugin to a buildå¦‚æœæˆ‘å€‘æƒ³è¦ç›´æ¥ä½¿ç”¨ Classic editor é…ç½®å¥½çš„åŠŸèƒ½ï¼Œä¸éœ€é¡å¤–æ“´å……ï¼Œæ­¤æ–¹æ³•å¯ä»¥å¿«é€Ÿç°¡æ˜“çš„å»ºç½®ï¼Œé¦–å…ˆå®‰è£å¥—ä»¶ï¼š npm install --save \\ @ckeditor/ckeditor5-vue2 \\ @ckeditor/ckeditor5-build-classic æ¥è‘—åœ¨å…ƒä»¶å…§åŠ å…¥ç·¨è¼¯å™¨ &lt;template&gt; &lt;div&gt; &lt;ckeditor :editor=\"editor\" v-model=\"editorData\"&gt;&lt;/ckeditor&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import CKEditor from '@ckeditor/ckeditor5-vue2';import ClassicEditor from '@ckeditor/ckeditor5-build-classic';export default { name: 'Editor', components: { ckeditor: CKEditor.component }, data() { return { editor: ClassicEditor, editorData: '&lt;div&gt;Hello World!&lt;/div&gt;' }; }};&lt;/script&gt; é€™æ¨£å°±å®Œæˆäº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆç°¡å–®å‘¢ï¼ ä½†å¦‚æœæˆ‘å€‘æƒ³æ“´å……åŠŸèƒ½ï¼Œåƒæ˜¯æ–°å¢ä¸‹åº•ç·š @ckeditor/ckeditor5-basic-styles/src/underlineï¼Œå°ˆæ¡ˆæœƒç›´æ¥å ±éŒ¯ï¼š Uncaught CKEditorError: ckeditor-duplicated-modules åŸå› æ˜¯ @ckeditor/ckeditor5-build-classic ç‚ºåŒ…è£å¥½çš„å…§å®¹ï¼Œè©¦è‘—é€²åˆ° node_modules/@ckeditor/ckeditor5-build-classic/package.json å¯ä»¥çœ‹åˆ°ç›¸ä¾å¥—ä»¶å·²ç¶“å®‰è£é€²å»ï¼š å› æ­¤ CKeditor åœ¨åˆå§‹åŒ–æ™‚æœƒå› ç‚ºæ¨¡çµ„é‡è¤‡åŸ·è¡Œå°è‡´éŒ¯èª¤ï¼Œå¯ä»¥æ”¹ç”¨ä»¥ä¸‹æ–¹æ³• Adding a plugin to an editorå®¢è£½åŒ–é…ç½®æ‰€æœ‰åŠŸèƒ½ï¼Œæ­¥é©Ÿç›¸å°è¤‡é›œï¼Œé¦–å…ˆå®‰è£åŸºæœ¬å¥—ä»¶ï¼š npm install --save \\ @ckeditor/ckeditor5-vue2 \\ @ckeditor/ckeditor5-editor-classic \\ @ckeditor/ckeditor5-dev-webpack-plugin \\ @ckeditor/ckeditor5-dev-utils \\ @ckeditor/ckeditor5-theme-lark \\ postcss@8 \\ postcss-loader@4 \\ raw-loader@4 é‡é»æ­¥é©Ÿï¼šéœ€æ‰‹å‹•è¨­å®š webpackï¼Œé€™ä¸€æ­¥æ¼æ‰æœƒç›´æ¥å ±éŒ¯ // nuxt.config.jsconst path = require('path');const CKEditorWebpackPlugin = require('@ckeditor/ckeditor5-dev-webpack-plugin');const { styles } = require('@ckeditor/ckeditor5-dev-utils');export default { build: { transpile: [ /ckeditor5-[^/\\\\]+[/\\\\]src[/\\\\].+\\.js$/ ], plugins: [ // Only with ssr: false new CKEditorWebpackPlugin({ // See https://ckeditor.com/docs/ckeditor5/latest/features/ui-language.html language: 'zh', additionalLanguages: 'all', addMainLanguageTranslationsToAllAssets: true }) ], // If you don't add postcss, the CKEditor css will not work. postcss: styles.getPostCssConfig({ themeImporter: { themePath: require.resolve('@ckeditor/ckeditor5-theme-lark') }, minify: true }), extend(config) { // If you do not exclude and use raw-loader to load svg, the following errors will be caused. // Cannot read property 'getAttribute' of null const svgRule = config.module.rules.find(item =&gt; { return /svg/.test(item.test); }); svgRule.exclude = [ path.join(__dirname, 'node_modules', '@ckeditor') ]; // add svg to load raw-loader config.module.rules.push({ test: /ckeditor5-[^/\\\\]+[/\\\\]theme[/\\\\]icons[/\\\\][^/\\\\]+\\.svg$/, use: [ 'raw-loader' ] }); } }} webpack è¨­å®šèªªæ˜ï¼š èªè¨€è¨­å®šï¼šé€™è£¡è¨­ç‚ºç¹é«”ä¸­æ–‡ï¼ˆâ€™zhâ€™ï¼‰ å¿…é ˆåœ¨ ssr: false æ¢ä»¶ä¸‹æ‰èƒ½é‹ä½œï¼Œå¦å‰‡æœƒå ±éŒ¯èª¤ window is not definedï¼Œè·Ÿ [CKEditorWebpackPlugin] Error: No translation has been found for the XX language æ’é™¤ @ckeditor svgï¼Œä¸¦ä½¿ç”¨ raw-loader è®€å– svg å…§å®¹ï¼Œå¦å‰‡æœƒæ‹‹ cannot read property â€˜getAttributeâ€™ of null éŒ¯èª¤ ä½¿ç”¨ PostCSS è½‰æ› css ä»£ç¢¼ï¼Œå¦å‰‡æœƒ css æ¨£å¼æœƒè®€å–ä¸åˆ° æ¥è‘—ä¾†è©¦è‘—å®‰è£ç·¨è¼¯å™¨åŠŸèƒ½ï¼Œç¯„ä¾‹å®‰è£ åŸºæœ¬æ¨£å¼ / å­—ç´š / å­—é«”ï¼š npm install --save \\ @ckeditor/ckeditor5-essentials \\ @ckeditor/ckeditor5-font \\ @ckeditor/ckeditor5-paragraph \\ æ‰€æœ‰ ckeditor æ‰€æœ‰å¥—ä»¶ç‰ˆæœ¬å¿…é ˆç›¸åŒï¼Œå¦å‰‡æœƒç™¼ç”ŸéŒ¯èª¤ï¼ˆ@ckeditor/ckeditor5-dev-* è·Ÿ @ckeditor/ckeditor5-vue2 é™¤å¤–ï¼‰ åŸºç¤è¨­å®šä»‹ç´¹ï¼š placeholderï¼šç·¨è¼¯å™¨ä½”ä½ç¬¦ pluginsï¼šç·¨è¼¯å™¨æ‡‰ç”¨åŠŸèƒ½ toolbarï¼šå·¥å…·åˆ—é…ç½®ï¼Œä¹Ÿå¯ä»¥åŠ å…¥åˆ†éš”ç¬¦è™Ÿ | å…¶ä»–ï¼šå„åŠŸèƒ½çš„ç›¸é—œè¨­å®šè«‹è¦‹å®˜æ–¹æ–‡ä»¶ &lt;template&gt; &lt;div&gt; &lt;ckeditor :editor=\"editor\" :config=\"editorConfig\" v-model=\"editorData\"&gt;&lt;/ckeditor&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import CKEditor from '@ckeditor/ckeditor5-vue2';import ClassicEditor from '@ckeditor/ckeditor5-editor-classic/src/classiceditor';import Essentials from '@ckeditor/ckeditor5-essentials/src/essentials';import FontFamily from '@ckeditor/ckeditor5-font/src/fontfamily';import FontSize from '@ckeditor/ckeditor5-font/src/fontsize';import Paragraph from '@ckeditor/ckeditor5-paragraph/src/paragraph';export default { name: 'Editor', components: { ckeditor: CKEditor.component }, data() { return { editor: ClassicEditor, editorData: '', editorConfig: { placeholder: 'è«‹è¼¸å…¥å…§å®¹', plugins: [ Essentials, FontFamily, FontSize, Paragraph ], toolbar: { items: [ 'fontSize', 'fontFamily', '|' ], shouldNotGroupWhenFull: true }, fontSize: { options: [ 12, 16, 18, 20, 24, 32, 40, 48 ], supportAllValues: true } } }; }};&lt;/script&gt; é€™æ¨£å°±å¯ä»¥æˆåŠŸçœ‹åˆ°ç•«é¢å›‰ ğŸ™Œ æ˜¯å¦è¦ºå¾—åŠŸèƒ½å®‰è£è·Ÿé…ç½®æœ‰é»éº»ç…©å‘¢ï¼Ÿå®˜æ–¹è²¼å¿ƒçš„æä¾› online-builder ï¼Œå¯ä»¥å…ˆæŒ‘é¸åŠŸèƒ½ä¸¦é…ç½®å¥½ toolbarï¼Œç¢ºèªç•«é¢å¾Œå†å®‰è£ å…¨åŸŸè¨»å†Šç•¶å°ˆæ¡ˆæœ‰å¾ˆå¤šåœ°æ–¹æœƒä½¿ç”¨åˆ°ç·¨è¼¯å™¨ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥å…¨åŸŸå¼•å…¥ æ–°å¢æª”æ¡ˆç½®æ–¼ pluginsï¼Œé€™è£¡å‘½å ckeditor.js // plugins/ckeditor.jsimport Vue from 'vue';import CKEditor from '@ckeditor/ckeditor5-vue2';Vue.use(CKEditor); nuxt.config.js é…ç½® // nuxt.config.jsexport default { plugins: [ { src: '@/plugins/ckeditor' } ] } CSS styleå¯¦å‹™æ‡‰ç”¨ä¸Šæœƒåœ¨å¾Œå°ä½¿ç”¨ç·¨è¼¯å™¨ä¾†è¨­è¨ˆå…§å®¹ï¼Œç„¶å¾Œå°‡ HTML å…§å®¹å„²å­˜åˆ°è³‡æ–™åº«ï¼Œæ–¼å‰å°å–å›è³‡æ–™ä¸¦æ¸²æŸ“åœ¨ç•«é¢ä¸Šï¼Œæ‰€ä»¥æœƒéœ€è¦é…ç½®ç›¸é—œçš„ CSSï¼Œç¢ºä¿å‰å¾Œå°æ¨£å¼ä¸€è‡´ã€‚ åªè¦è¤‡è£½ Content styles åœ¨å°ˆæ¡ˆå…§ï¼Œç„¶å¾Œåœ¨ç·¨è¼¯å™¨å…§å®¹çš„å¤–å±¤å®¹å™¨åŠ ä¸Š ck-content CSS class å°±å¯ä»¥å›‰ï¼Œç¯„ä¾‹å¦‚ä¸‹ï¼š &lt;template&gt; &lt;div class=\"ck-content\"&gt; // ç·¨è¼¯å™¨å…§å®¹ &lt;div v-html=\"content\"&gt;&lt;/div&gt; &lt;/div&gt;&lt;/template&gt; åƒè€ƒæ–‡ç« ï¼š https://github.com/changemyminds/nuxtjs-integrate-ckeditor5?ref=vuejsexamples.com https://ithelp.ithome.com.tw/articles/10198816 https://medium.com/@charming_rust_oyster_221/ckeditor-5-æ–‡å­—ç·¨è¼¯å™¨-ç ”ç©¶å¿ƒå¾—-519c97f20a4 https://ckeditor.com/docs/ckeditor5/latest/installation/frameworks/vuejs-v2.html","link":"/2022/12/01/nuxt/nuxt-ckeditor5/"},{"title":"Nuxt.js nuxt.config.js è¨­å®šæª”","text":"ç‰ˆæœ¬ï¼šnuxt 2.15.8 å…¨åç‚º Nuxt configuration fileï¼ŒåŠŸèƒ½åŒ Vue å°ˆæ¡ˆå…§ vue.config.js æª”ï¼Œå¦‚æœæˆ‘å€‘ä½¿ç”¨ create-nuxt-app ä¾†å»ºç½®å°ˆæ¡ˆï¼Œæœƒè‡ªå‹•ç”¢ç”Ÿé€™æ”¯æª”æ¡ˆï¼Œåœ¨æ­¤é…ç½®çš„å…§å®¹ï¼Œæœƒå…¨åŸŸè®€å–è¨­å®šã€‚ æ¥ä¸‹ä¾†ä»‹ç´¹ä¸€ä¸‹ä¸€äº›å¸¸ç”¨çš„è¨­å®šï¼š aliasè·¯å¾‘åˆ¥åï¼Œå¤§å®¶é‚„è¨˜å¾—åœ¨ Vue å°ˆæ¡ˆå…§ï¼Œå¦‚æœæ²’æœ‰è¨­å®šè·¯å¾‘åˆ¥åï¼Œå‰‡éœ€è¦å¯«ç›¸å°è·¯å¾‘ï¼ˆä¾‹å¦‚ï¼š../components/Navbar.vueï¼‰ï¼Œå°æ–¼ç¶­è­·å’Œé–‹ç™¼éƒ½å¾ˆä¸æ–¹ä¾¿ï¼Œä¸€äº›ç¨‹å¼ç¢¼æª¢æ ¸å·¥å…·ï¼Œç”šè‡³æœƒè¦–ç‚º bad smellï¼Œå› æ­¤æˆ‘å€‘æœƒåœ¨ vue.config.js æª”å…§çµ±ä¸€è¨­å®šè·¯å¾‘åˆ¥åã€‚ Nuxt å°ˆæ¡ˆå¾ˆè²¼å¿ƒçš„è‡ªå‹•é…ç½®äº†è·¯å¾‘åˆ¥åï¼Œé è¨­å€¼å¦‚ä¸‹ { '~~': `&lt;rootDir&gt;`, '@@': `&lt;rootDir&gt;`, '~': `&lt;srcDir&gt;`, '@': `&lt;srcDir&gt;`, 'assets': `&lt;srcDir&gt;/assets`, // (unless you have set a custom `dir.assets`) 'static': `&lt;srcDir&gt;/static`, // (unless you have set a custom `dir.static`)} å› æ­¤åœ¨å¼•å…¥å…ƒä»¶ Navbar æ™‚å¯ä»¥å¯«æˆ @/components/Navbar.vue å¦‚æœéœ€è¦æ›´æ”¹é…ç½®ä¹Ÿå¯ä»¥ import { resolve } from 'path';export default { alias: { 'images': resolve(__dirname, './assets/images'), '@static': resolve(__dirname, './static') }} ssrserver side renderï¼Œé è¨­ç‚º trueï¼Œå¦‚æœä¸éœ€ SEOï¼Œåªè¦ spa æ“ä½œï¼Œè¨­å®š ssr: false å³å¯ èˆŠç‰ˆæœƒä½¿ç”¨ mode: 'spa' ä¾†é€²è¡Œè¨­å®šï¼Œä½†å®˜æ–¹æ–‡ä»¶æœ‰èªªæ˜ v2.14.5 ç‰ˆæœ¬é–‹å§‹å·²æ£„ç”¨ï¼Œæ”¹ç”¨ ssr: false export default { ssr: false // spa} serverç”¨ä¾†è¨­å®š portï¼ˆé è¨­ 3000ï¼‰ è·Ÿ hostï¼ˆé è¨­ localhostï¼‰ export default { server: { port: 8000, host: 'my-website' }} routeré…ç½® Nuxt è·¯ç”±ï¼ˆvue-routerï¼‰ï¼Œé€™è£¡ä»¥è¨­å®š base url èˆ‰ä¾‹ï¼Œå…¶ä»–è«‹åƒè€ƒå®˜æ–¹æ–‡ä»¶ export default { router: { base: '/backoffice/' }} headåœ¨ Vue å°ˆæ¡ˆï¼Œæˆ‘å€‘è¦è¨­å®š head å…§å®¹ï¼Œåªè¦åœ¨ public/index.html æª”è¨­å®šå°±å¥½äº†ï¼Œä½† Nuxt å°ˆæ¡ˆåˆè©²æ€éº¼è¨­å®šå‘¢ï¼Ÿ å…¨åŸŸè¨­å®šåœ¨ nuxt.config.js æª” head å…§å³å¯å…¨åŸŸè¨­å®šï¼Œé€šå¸¸åœ¨å»ºç«‹å°ˆæ¡ˆæœƒé å…ˆå¸¶å…¥ export default { head: { title: 'test', htmlAttrs: { lang: 'en' }, meta: [ { charset: 'utf-8' }, { name: 'viewport', content: 'width=device-width, initial-scale=1' }, { hid: 'description', name: 'description', content: '' }, { name: 'format-detection', content: 'telephone=no' } ], link: [ { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' } ] }} é€™æ¨£æ‰€æœ‰é é¢éƒ½å¯ä»¥è®€åˆ° head è¨­å®š å–®é è¨­å®šNuxt å°ˆæ¡ˆå¾ˆé‡è¦çš„ä¸€é»æ˜¯ SEO æ•ˆèƒ½å„ªåŒ–ï¼ŒåŸºæ–¼é€™é»ï¼Œé€šå¸¸æœƒéœ€è¦ä¾ç…§å„é è¨­å®šè‡ªå·±çš„ SEOï¼Œä¾‹å¦‚pages/about.vue é é¢çš„ title å’Œ description è¦å–®ç¨è¨­å®šï¼Œæ–¹æ³•ä¹Ÿå¾ˆç°¡å–® export default { head: { title: 'é—œæ–¼æˆ‘å€‘', meta: [ { hid: 'description', name: 'description', content: 'é€™æ˜¯é—œæ–¼æˆ‘å€‘é é¢' } ] }} åœ¨å„é é¢è¨­å®šçš„å…§å®¹å„ªå…ˆåº¦è¼ƒé«˜ï¼Œæœƒè¦†å¯«å…¨åŸŸè¨­å®šçš„ head å…§å®¹ï¼Œå› æ­¤ç•¶æˆ‘å€‘é–‹å•Ÿ about é é¢ï¼Œæœƒçœ‹åˆ° title è®Šæˆ é—œæ–¼æˆ‘å€‘ã€description è®Šæˆ é€™æ˜¯é—œæ–¼æˆ‘å€‘é é¢ï¼Œå…¶ä»–é…ç½®å‰‡ä¾ç…§ nuxt.config.js æª” csså¼•å…¥å…¨åŸŸä½¿ç”¨çš„ css æª”ï¼Œåƒæ˜¯å¤–éƒ¨å¥—ä»¶ï¼Œæˆ–æ˜¯è‡ªè¨‚æª”ï¼Œå¦‚æœè¦ä½¿ç”¨ sassï¼Œå¿…é ˆå®‰è£ sass-loader npm install --save-dev sass sass-loader export default { css: [ // å¤–éƒ¨å¥—ä»¶ { src: 'bootstrap-icons/font/bootstrap-icons.css' }, // scss æª” { src: '@/assets/scss/app.scss', lang: 'scss' } ]} pluginså…¨å±€å¼•å…¥å¤–éƒ¨å¥—ä»¶ï¼Œä»¥ vue-notification èˆ‰ä¾‹ï¼Œåœ¨ plugins æ–°å¢ notification.js æª” // plugins/notification.jsimport Vue from 'vue';import Notifications from 'vue-notification';Vue.use(Notifications); åœ¨ nuxt.config.js é…ç½® plugins export default { plugins: [ { src: '@/plugins/notification.js' } ]} å°±å¯ä»¥åœ¨æ‰€æœ‰é é¢ä¸­ä½¿ç”¨è©²å¥—ä»¶ &lt;Notifications&gt;&lt;/Notifications&gt; componentså¦‚è¨­å®šç‚º trueï¼Œæœƒå…¨å±€å¼•å…¥å…ƒä»¶ï¼Œä½¿ç”¨æ–¹å¼åªè¦éµå¾ªè³‡æ–™å¤¾çµæ§‹è¼¸å…¥å…ƒä»¶åç¨±å°±å¯ä»¥äº† export default { components: true} ç¯„ä¾‹ï¼š å…ƒä»¶è·¯å¾‘ï¼šcomponents/home/Banner.vue ä½¿ç”¨å…ƒä»¶ï¼š&lt;HomeBanner&gt;&lt;/HomeBanner&gt; buildModulesç”¨ä¾†é…ç½®åªåœ¨é–‹ç™¼ç’°å¢ƒä½¿ç”¨çš„æ¨¡çµ„ï¼Œè¨»å†Šåœ¨æ­¤å¯ä»¥è®“å°ˆæ¡ˆåœ¨ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²é€Ÿåº¦æå‡ï¼Œä¸¦æ¸›å°‘ node_modules å®¹é‡ï¼Œè©³æƒ…å¯ä»¥åƒè€ƒå„å¥—ä»¶çš„é…ç½®å»ºè­° @nuxtjs/eslint-module å¥—ä»¶å®˜æ–¹å»ºè­°é…ç½®æ–¼ buildModules export default { buildModules: [ '@nuxtjs/eslint-module' ]} ä½¿ç”¨æ¢ä»¶ï¼šNuxt ç‰ˆæœ¬å¿…é ˆå¤§æ–¼ v2.9 modulesç”¨ä¾†é…ç½®é–‹ç™¼ç’°å¢ƒèˆ‡ç”Ÿç”¢ç’°å¢ƒå…±ç”¨æ¨¡çµ„ï¼ŒbuildModules åŠ modules é…ç½®ä½ç½®è©³è«‹åƒè€ƒå„å¥—ä»¶å»ºè­° export default { modules: [ '@nuxtjs/style-resources' ]} styleResourcesç”¨ä¾†æ³¨å…¥å…¨åŸŸå…±ç”¨ sass, scssï¼Œå¦‚æœä¸å¼•å…¥ï¼Œåœ¨å„é é¢ï¼ˆ.vueï¼‰å…§çš„ style æœƒç„¡æ³•ä½¿ç”¨åƒæ˜¯ mixin ç­‰çš„å¸¸ç”¨è®Šæ•¸ï¼Œæˆ–æ˜¯è¦åœ¨å„é é¢å–®ç¨ @import scss æª” é¦–å…ˆå¿…é ˆå¦å¤–å®‰è£ @nuxtjs/style-resources å¥—ä»¶ åŸ·è¡Œï¼šnpm i @nuxtjs/style-resources åœ¨ nuxt.config.js æª”è¨­å®š export default { modules: [ '@nuxtjs/style-resources' ], styleResources: { scss: [ '@/assets/scss/components/_color.scss', '@/assets/scss/components/_mixin.scss' ] }} é€™æ¨£å°±å¯ä»¥é”åˆ°è®Šæ•¸å…±ç”¨äº† å®˜æ–¹æ–‡ä»¶ æåˆ°ï¼Œè«‹å‹¿å¼•å…¥å¯¦éš›çš„ css æ¨£å¼ï¼Œå› ç‚ºæ¯å€‹é é¢è·Ÿå…ƒä»¶éƒ½æœƒé‡è¤‡ç·¨è­¯ï¼Œé€ æˆç³»çµ±æ¥µå¤§è² æ“”ï¼ˆç­†è€…è¸©å‘éOQï¼‰ï¼Œå»ºè­°åªæ³¨å…¥è®Šæ•¸, mixinsï¼Œå› ç‚ºé€™äº›å€¼åœ¨ç·¨è­¯å¾Œå°±æœƒæ¶ˆå¤±äº†ã€‚ buildå®¢è£½åŒ– webpack è¨­å®šï¼Œé€™è£¡èˆ‰ä¾‹ï¼Œåœ¨é–‹ç™¼æ™‚ï¼Œç™¼ç¾åœ¨ Vue æ¨£æ¿ç„¡æ³•ä½¿ç”¨å¯é¸ä¸²é€£ Optional Chainingï¼ˆes2020èªæ³•ï¼‰ï¼Œç ”ç©¶å¾Œç™¼ç¾å¿…é ˆéœ€å®‰è£æ“´å……å¥—ä»¶ npm install vue-template-babel-compiler --save-dev æ¥è‘—åœ¨ nuxt.config.js æª”è¨­å®šï¼Œå°±å¯ä»¥æˆåŠŸä½¿ç”¨å›‰ export default { build: { loaders: { vue: { compiler: require('vue-template-babel-compiler') } } }} LoadingLoading æ•ˆæœï¼ŒåŸºç¤è¨­å®šå¦‚ä¸‹ï¼ˆåƒæ•¸é¸é …ï¼‰ export default { loading: { color: 'black', height: '5px', continuous: true }} å¦‚æœæƒ³è‡ªè¨‚æ›´å¤šæ¨£å¼ï¼Œä¹Ÿå¯ä»¥åŒ…è£æˆå…ƒä»¶å¾Œå¼•å…¥ export default { loading: '@/components/TheLoading.vue'} envç”¨ä¾†å®šç¾©å…¨å±€å…±ç”¨çš„ç’°å¢ƒè®Šæ•¸ï¼ŒNuxt å°ˆæ¡ˆé è¨­åªæœ‰ nuxt.config.js æª”å…§å¯ä»¥è®€å–ç’°å¢ƒè®Šæ•¸ï¼Œ å› æ­¤å¦‚æœè¦è®“ .vue æª”æˆ–æ˜¯ .js æª”è®€åˆ°è®Šæ•¸ï¼Œé€™è£¡æä¾›ä»¥ä¸‹å…©å€‹åšæ³•ï¼š æ–¹æ³•ä¸€ï¼šç›´æ¥åœ¨ nuxt.config.js æª”å…§é…ç½®å±¬æ€§export default { env: { BASE_URL: process.env.BASE_URL }} ä½†æœ‰æ™‚è®Šæ•¸å¤šï¼Œä¸æƒ³å„åˆ¥é…ç½®ï¼Œå¯ä»¥æ¡ç”¨æ–¹æ³•äºŒ æ–¹æ³•äºŒï¼šå®‰è£å¥—ä»¶ @nuxtjs/dotenvåŸ·è¡Œï¼šnpm i @nuxtjs/dotenvï¼Œåœ¨ modules å…§è¨­å®šï¼š export default { modules: [ '@nuxtjs/dotenv' ]} é€™æ¨£å°±å¯ä»¥å…¨åŸŸä½¿ç”¨ .env è®Šæ•¸å›‰ã€‚ å°ˆæ¡ˆå¦‚æœæœ‰å€åˆ†é–‹ç™¼è·Ÿç”Ÿç”¢ç’°å¢ƒ .env æª”ï¼Œä¹Ÿå¯ä»¥è¨­å®šå¦‚ä¸‹ï¼š export default { modules: [ [ '@nuxtjs/dotenv', { filename: `.env.${process.env.ENV}` } ] ]} ä½¿ç”¨æ–¹æ³•äºŒéœ€æ³¨æ„ï¼Œè®Šæ•¸å¦‚æœå…§å«è®Šæ•¸ï¼Œæœƒè®€å–ä¸åˆ°ç¬¬äºŒå±¤çš„è®Šæ•¸ï¼ˆé¥’å£ï¼‰ï¼Œç›´æ¥æä¾›ç¯„ä¾‹ï¼Œå‡è¨­åœ¨ .env æª”å…§æœ‰å…©å€‹è®Šæ•¸BASE_DOMAIN=my-websitesBASE_URL=\"http://${BASE_DOMAIN}\"åœ¨ .vue æª”ç›´æ¥ä½¿ç”¨ process.env.BASE_URLï¼Œå–å¾—å€¼ç‚º http://${BASE_DOMAIN}ï¼Œç„¡æ³•è§£ææˆ http://my-websitesï¼Œæ­¤æƒ…æ³é‚„æ˜¯éœ€æ­é…æ–¹æ³•ä¸€ä½¿ç”¨ åƒè€ƒæ–‡ç« ï¼š https://ithelp.ithome.com.tw/articles/10207330 https://nuxtjs.org/docs/configuration-glossary https://hackmd.io/@xq/nuxt-config","link":"/2022/11/19/nuxt/nuxt-config-setting/"},{"title":"Nuxt.js è¨­å®š GA & GTM","text":"ç‰ˆæœ¬ï¼šnuxt 2.15.8 ç¶²ç«™ä¸Šç·šå¾Œï¼Œæˆ‘å€‘æœƒéœ€è¦ Google Analytics å’Œ Google Tag Manager å·¥å…·ä¾†è¿½è¹¤åˆ†æç¶²ç«™æµé‡ï¼Œæ¥ä¸‹ä¾†èªªæ˜å¦‚ä½•åœ¨ Nuxt.js å°ˆæ¡ˆå…§åŠ å…¥è¿½è¹¤ç¢¼ã€‚ Google Analyticsç”³è«‹ä»£ç¢¼ï¼š è‡³ Google Analytics åˆ†æï¼Œä½¿ç”¨ google å¸³æˆ¶ç™»å…¥ï¼Œé»é¸å·¦ä¸‹è§’çš„ç®¡ç† é¸æ“‡å»ºç«‹è³‡æº è¨­å®šè³‡æºåç¨±ï¼Œé¸é …å‹¾é¸å¾Œï¼Œé»é¸å»ºç«‹ é¸æ“‡è³‡æ–™ä¸²æµå¹³å°ï¼šç¶²ç«™ è¨­å®šç¶²ç«™ç¶²å€è·Ÿä¸²æµåç¨±ï¼Œæ¥è‘—å°±æ–°å¢æˆåŠŸä¸¦å–å¾— GA ä»£ç¢¼ã€‚ è¨­å®šä»£ç¢¼ï¼šæ­é…å¥—ä»¶ vue-gtag ï¼ŒåŸ·è¡Œï¼šnpm i vue-gtag@1.16.1 Vue v2.x éœ€æ­é… vue-gtag v1.x æ¥è‘—æˆ‘å€‘æ–°å¢æª”æ¡ˆè‡³ pluginsï¼Œé€™è£¡å‘½åç‚º gtag.js import Vue from 'vue';import VueGtag from 'vue-gtag';Vue.use(VueGtag, { config: { id: 'UA-XXXXXXXXX-X' }}); é…ç½®åˆ° nuxt.config.js export default { plugins: [ { src: '@/plugins/gtag.js' } ]} Google Tag Managerç”³è«‹ä»£ç¢¼ï¼š è‡³ Google Tag Manager ä»£ç¢¼ç®¡ç†å·¥å…·ï¼Œä½¿ç”¨ google å¸³æˆ¶ç™»å…¥ä¸¦å»ºç«‹å¸³æˆ¶ è¨­å®šå¸³æˆ¶åç¨±ï¼ˆå‘½åä¸€å€‹å®¹æ˜“è¾¨è­˜ç¶²ç«™çš„åç¨±ï¼‰ï¼Œæ¥è‘—è¨­å®šå®¹å™¨ï¼ˆGTM è¦æ”¾å…¥çš„ç¶²åŸŸï¼‰ï¼ŒæŒ‰ä¸‹å»ºç«‹ï¼Œå°±å¯ä»¥çœ‹åˆ°æ–°å¢çš„å®¹å™¨è·Ÿ GTM ä»£ç¢¼å›‰ è¨­å®šä»£ç¢¼ï¼šæ­é…å¥—ä»¶ @nuxtjs/gtm ï¼ŒåŸ·è¡Œï¼šnpm i @nuxtjs/gtmï¼Œç„¶å¾Œé…ç½® nuxt.config.js export default { modules: [ '@nuxtjs/gtm', ], gtm: { id: 'GTM-XXXXXXX' }} é è¨­å…§å®¹ åƒè€ƒï¼Œä¹Ÿå¯ä»¥èª¿æ•´è¨­å®š export default { modules: [ '@nuxtjs/gtm', ], gtm: { id: 'GTM-XXXXXXX', enabled: true, // for dev mode pageTracking: true }} å¦‚æœä»£ç¢¼éƒ½æ˜¯å›ºå®šçš„å…§å®¹ï¼Œé€™æ¨£å°±å®Œæˆå›‰ï½ ä¸éäº‹æƒ…ç¸½æ²’é€™éº¼ç°¡å–®ï¼Œå¦‚æœä»Šå¤©å°ˆæ¡ˆæœ‰å¾Œå°ï¼ŒGA è·Ÿ GTM éƒ½å¯ä¾›ä½¿ç”¨è€…è¨­å®šï¼Œä»£ç¢¼éƒ½æ˜¯è®Šå‹•çš„åƒæ•¸ï¼Œåˆè©²æ€éº¼åšå‘¢ï¼Ÿ æ•´åˆå¾Œç«¯ API é€²è¡Œä»£ç¢¼è¨­å®šé€™è£¡åŒæ™‚èªªæ˜ GA è·Ÿ GTM çš„é…ç½®ï¼Œé¦–å…ˆå®‰è£å¥—ä»¶ npm i vue-gtag@1.16.1 npm i @nuxtjs/gtm ç”±æ–¼è¦ä¸²æ¥ APIï¼Œé€™è£¡æ­é… @nuxtjs/axios ä½¿ç”¨ï¼ŒåŸ·è¡Œï¼šnpm i @nuxtjs/axios æ–°å¢ plugins/gtag.js import Vue from 'vue';import VueGtag from 'vue-gtag';export default async ({ $gtm, $axios }) =&gt; { const { gaFour, gtm } = await $axios.$get('/api/ga'); // GA4 Vue.use(VueGtag, { config: { id: gaFour } }); // GTM if (gtm) { $gtm.init(gtm); }}; é…ç½® nuxt.config.js export default { plugins: [ { src: '@/plugins/gtag.js' } ], modules: [ '@nuxtjs/gtm' ], gtm: { enabled: true, pageTracking: true }} åƒè€ƒæ–‡ç« ï¼š https://www.turingdigital.com.tw/blog/install-ga4-property https://www.cyberbiz.io/support/?p=228 https://stackoverflow.com/questions/64612031/setup-google-analytics-4-in-nuxt-js","link":"/2022/12/14/nuxt/nuxt-ga-and-gtm/"},{"title":"Nuxt.js å°ˆæ¡ˆæ¶è¨­","text":"ç‰ˆæœ¬ï¼šnuxt 2.15.8 èªªåˆ° Nuxtï¼Œå¿…é ˆå…ˆå¾ Vue.js èªªèµ·ï¼ŒVue.js ç‚ºå°ˆæ³¨åœ¨è¦–åœ–å±¤(View) çš„ JS æ¡†æ¶ï¼Œç‚º SPAï¼ˆSingle Page Applicationï¼‰æ‡‰ç”¨ç¨‹å¼ï¼Œç°¡è€Œè¨€ä¹‹æ•´å€‹ç¶²ç«™æ‡‰ç”¨åªæœ‰å–®ä¸€é é¢ï¼Œä¸€ä½†é é¢è¢«åŠ è¼‰é€²ä¾†å¾Œï¼Œå°±ä¸æœƒå†é€²è¡Œè©²é é¢è«‹æ±‚ï¼Œç”±æ–¼ Vue æ˜¯åˆ©ç”¨ JS è¼‰å…¥è³‡æ–™ï¼Œä¸¦å‹•æ…‹ç”¢ç”Ÿå…ƒä»¶ï¼ŒSEO åªèƒ½æŠ“å–åˆ° HTML å…§å®¹ï¼Œå› æ­¤ SEO è¡¨ç¾è¶¨è¿‘æ–¼é›¶ã€‚ è€Œ Nuxt æ˜¯åŸºæ–¼ Vue.jsã€Node.jsã€Webpack ä»¥åŠ Badel.js çš„è¼•é‡æ¡†æ¶ï¼Œå¯ä»¥åŒæ™‚å‰µå»º SSRï¼ˆServer Side Renderï¼‰åŠ SPAï¼Œåœ¨é é¢è¼‰å…¥å‰å³æ¸²æŸ“ï¼ˆä¼ºæœå™¨å›å‚³å®Œæ•´ HTML æª”ï¼Œæ¯æ¬¡è·³è½‰é é¢ï¼Œç€è¦½å™¨éƒ½éœ€è¦åˆ·æ–°ï¼‰ï¼Œæœå°‹å¼•æ“çˆ¬èŸ²å¯ä»¥å–å¾—è³‡æ–™ï¼Œå¤§å¹…è§£æ±º SEO çš„å•é¡Œã€‚ ä»¥ä¸‹åœ–ç‰‡èªªæ˜ï¼š æ¥ä¸‹ä¾†ä¸€èµ·ä¾†å˜—è©¦å‰µå»ºä¸€å€‹ Nuxt å°ˆæ¡ˆå§ï¼ å¦‚åŒ Vue CLIï¼ŒNuxt ä¹Ÿæœ‰é¡ä¼¼çš„æŒ‡ä»¤åˆ—(command-line)å·¥å…· create-nuxt-appï¼Œ ä¾æ“šå®˜æ–¹æ–‡ä»¶æä¾›çš„å°ˆæ¡ˆåŒ…å»ºç½®æ–¹å¼ï¼š npx create-nuxt-app &lt;project-name&gt; ä½¿ç”¨ npx å®‰è£ï¼Œå®‰è£çš„å¥—ä»¶åœ¨åŸ·è¡Œå®Œå¾Œå°±æœƒè¢«ç§»é™¤ npxä»‹ç´¹ æ¥è‘—æœƒè·‘å‡ºä¸€äº›é¸é …ï¼š Project nameï¼šè¨­å®šå°ˆæ¡ˆåç¨± Programming languageï¼šé¸æ“‡ç¨‹å¼èªè¨€ Package managerï¼šè»Ÿé«”å¥—ä»¶ç®¡ç†ç³»çµ± npm / yarn UI frameworkï¼šcss æ¨¡æ¿ Template engineï¼šæ¨£ç‰ˆå¼•æ“ Nuxt.js modulesï¼šç›¸ä¾å¥—ä»¶ Linting toolsï¼šç¨‹å¼ç¢¼æª¢æŸ¥å·¥å…· Testing frameworkï¼šæ¸¬è©¦å·¥å…· Rendering modeï¼šæ¸²æŸ“æ¨¡å¼ Deployment targetï¼šé‹è¡Œæ¨¡å¼ ï¼ˆåœ¨æ­¤ç¤ºç¯„ Server Side Render) Development toolsï¼šé–‹ç™¼å·¥å…· Version control systemï¼šç‰ˆæ§å·¥å…· ä»¥ä¸Šé¸æ“‡å®Œç•¢å°±é–‹å§‹å®‰è£å°ˆæ¡ˆåŒ… é‹è¡Œå®Œæˆå°±å¯ä»¥é–‹å§‹ç·¨è­¯å°ˆæ¡ˆ è·Ÿè‘—æç¤ºè¨Šæ¯åŸ·è¡Œï¼š cd testnpm run dev åœ¨ package.json å…§å¯ä»¥çœ‹åˆ°ç›¸é—œæŒ‡ä»¤ \"scripts\": { \"dev\": \"nuxt\", \"build\": \"nuxt build\", \"start\": \"nuxt start\", \"generate\": \"nuxt generate\"} æ¥ä¸‹ä¾†å°±å¯ä»¥çœ‹åˆ°ç•«é¢å›‰ ğŸ‘ åƒè€ƒæ–‡ç« ï¼š https://medium.com/web-design-zone/å»ºç«‹nuxt-jså°ˆæ¡ˆåˆé«”é©—-21920735e38b https://levelup.gitconnected.com/spa-ssg-ssr-and-jamstack-a-front-end-acronyms-guide-6add9543f24d","link":"/2022/11/16/nuxt/nuxt-installation/"},{"title":"Nuxt.js Lifecycle ç”Ÿå‘½é€±æœŸ","text":"ç‰ˆæœ¬ï¼šnuxt 2.15.8 Nuxt æœ€å¤§çš„ç‰¹é»å°±æ˜¯ Server Side Renderï¼Œå› æ­¤ä»–æœ‰ç¨ç«‹çš„ç”Ÿå‘½é€±æœŸï¼Œä¾†çœ‹ä¸€ä¸‹å®˜æ–¹æä¾›çš„åœ–ç‰‡ï¼š nuxtServerInitåªåœ¨ Nuxt ç’°å¢ƒåˆå§‹åŒ–æ™‚è§¸ç™¼ï¼Œç•¶æˆ‘å€‘æƒ³å°‡ server ç«¯è³‡æ–™æå‰å‚³çµ¦ client ç«¯ï¼Œå¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œè¦æ³¨æ„åªèƒ½å¯«åœ¨ VueX store/index.js actions // store/index.jsexport const state = () =&gt; ({ userInfo: {}});export const mutations = { setUserInfo(state, value) { state.userInfo = value; }};export const actions = { nuxtServerInit({ commit }, { req }) { // req.session.user = { name: 'claire' } commit('setUserInfo', req.session.user); }}; é€™æ¨£å°±å¯ä»¥åœ¨ Nuxt åˆå§‹åŒ–æ™‚ï¼Œè§¸ç™¼ nuxtServerInit æ–¹æ³•ï¼Œå°‡å€¼å‚³å…¥ stateï¼Œæˆ‘å€‘å¯ä»¥å¾ç€è¦½å™¨ Vue é–‹ç™¼è€…å·¥å…·çœ‹åˆ°å…§å®¹ï¼š å¦‚æœæƒ³å°‡è³‡æ–™å‚³çµ¦å…¶ä»– VueX modulesï¼Œå¯ä»¥é€™æ¨£åšï¼š é¦–å…ˆæ–°å¢ä¸€æ”¯æª”æ¡ˆ store/greeting.js // store/greeting.jsexport const state = () =&gt; ({ message: ''});export const mutations = { setMessage(state, value) { state.message = value; }}; æ¥è‘—åœ¨ store/index.js å®šç¾© nuxtServerInit // store/index.jsexport const actions = { nuxtServerInit({ commit }, { req }) { commit('greeting/setMessage', 'Hello World!'); }}; é€™æ¨£å°±å¯ä»¥è§¸ç™¼ store/greeting.js setMessage æ–¹æ³•ï¼Œè¦‹ä¸‹åœ–é–‹ç™¼è€…å·¥å…· Route Middlewareä¸­é–“çµ„ä»¶ï¼Œåœ¨é é¢æ¸²æŸ“å‰åŸ·è¡Œï¼Œæœ‰ä¸‰ç¨®å®šç¾©æ–¹å¼ï¼ŒåŸ·è¡Œé †åºç‚ºï¼šGlobal â†’ Layout â†’ Page æ¥ä¸‹ä¾†åˆ†åˆ¥èªªæ˜è©²å¦‚ä½•å®šç¾© Global Middlewareåœ¨ middleware è³‡æ–™å¤¾å…§å»ºç«‹æª”æ¡ˆï¼Œé€™è£¡å‘½åç‚º global.js // middleware/global.jsexport default ({ from, route, redirect, store, error }) =&gt; { console.log('global middleware'); if (!store.isLogin) { redirect('/login'); }}; æ¥è‘—åœ¨ nuxt.config.js é…ç½® // nuxt.config.jsexport default { router: { middleware: [ 'global' ] }} Layout Middlewareå»ºç«‹ middleware æª”æ¡ˆï¼Œé€™è£¡å‘½åç‚º middleware/layout.jsï¼Œç„¶å¾Œé…ç½®åˆ°ä»»ä¸€ layouts æª”æ¡ˆï¼Œç¯„ä¾‹ä½¿ç”¨ layouts/default.vue // layouts/default.vueexport default { name: 'Default', middleware: 'layout'}; æˆ–æ˜¯åŒ¿åé…ç½®ä¹Ÿå¯ä»¥ï¼š // layouts/default.vueexport default { name: 'Default', middleware({ from, route, redirect, store, error }) { console.log('layout middleware'); }}; Page Middlewareæ¦‚å¿µåŒ layouts middlewareï¼Œé…ç½®æ–¼ä»»ä¸€ pages æª”æ¡ˆï¼Œç¯„ä¾‹ä½¿ç”¨ pages/about.vueï¼Œé€™è£¡ä½¿ç”¨åŒ¿åé…ç½®ä¾†èªªæ˜ // pages/about.vueexport default { name: 'About', middleware({ from, route, redirect, store, error }) { console.log('page middleware'); }}; æ¥è‘—æˆ‘å€‘å¾é–‹ç™¼è€…å·¥å…·æŸ¥çœ‹ console çµæœä¾åºç‚ºä¸‹åœ–ï¼Œå› æ­¤æˆ‘å€‘å¯ä»¥é€é layout è·Ÿ page middleware ä¾†è¦†å¯« global middleware validateæ–¼ pages æª”æ¡ˆé…ç½®æ­¤æ–¹æ³•ï¼Œç”¨ä¾†é©—è­‰å‹•æ…‹è·¯ç”±åƒæ•¸æœ‰æ•ˆæ€§ï¼Œç¯„ä¾‹ä½¿ç”¨ pages/about/_userId.vue // pages/about/_userId.vueexport default { name: 'User', validate({ params, query }) { return true; // é©—è­‰é€šé return false; // é©—è­‰ç„¡æ•ˆï¼Œæœƒè‡ªå‹•è½‰å° error page }} é©—è­‰é€šéå¿…é ˆ return trueï¼Œå¦å‰‡æœƒè‡ªå‹•è½‰è·³ 404 error page asyncDataæ–¼ server ç«¯è™•ç†éåŒæ­¥çš„ç”Ÿå‘½é€±æœŸï¼Œåœ¨æ­¤å‚³å…¥çš„å…§å®¹å¯ä»¥è¢«æœå°‹å¼•æ“çˆ¬èŸ²å–å¾—ï¼Œæ˜¯æå‡ SEO æ•ˆèƒ½çš„é‡é»ç”Ÿå‘½é€±æœŸã€‚ åªæœƒåœ¨é é¢è¼‰å…¥æ™‚èª¿ç”¨ï¼Œç”±æ–¼ç”Ÿå‘½é€±æœŸåœ¨ Vue ä¹‹å‰ï¼Œå› æ­¤ç„¡æ³•å–å¾— this ï¼Œä¸” asyncData åƒ…é™ pages åº•ä¸‹é é¢ä½¿ç”¨ï¼Œæ–¹æ³•å…§æœƒè‡ªå‹•å¸¶å…¥ context åƒæ•¸ï¼Œæˆ‘å€‘å¯ä»¥å®‰è£ @nuxtjs/axios å¥—ä»¶ï¼Œaxios æœƒè¢«æ³¨å…¥é€² context å…§ï¼Œæˆ‘å€‘å¯ä»¥ç‰©ä»¶è§£æ§‹æ–¹å¼ä½¿ç”¨ï¼ˆ { $axios, params } = context )ï¼ˆç¯„ä¾‹ä½¿ç”¨ pages/about.vueï¼‰ // pages/about.vueexport default { name: 'About', async asyncData({ $axios, params }) { const id = params.id; const { data } = await $axios.$get(`/api/user/${id}`); return { userName: data }; }} é€é return valueï¼Œè³‡æ–™è¢«è³¦äºˆé€² Vue å¯¦é«”ï¼Œæˆ‘å€‘é€é this.userName å³å¯æˆåŠŸå–å€¼ // pages/about.vue&lt;template&gt; &lt;div&gt; &lt;h1&gt;{{ userName }}&lt;/h1&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default { name: 'About', async asyncData({ $axios, params }) { const id = params.id; const { data } = await $axios.$get(`/api/user/${id}`); return { userName: data }; }}&lt;/script&gt; data å¦‚æœæœ‰ç›¸åŒè®Šæ•¸åç¨±ï¼Œæœƒåœ¨ asyncData ç”Ÿå‘½é€±æœŸè¢«è¤‡å¯«ï¼Œæ‰€ä»¥é™¤ééœ€è¦å†æ¬¡ä¿®æ”¹è®Šæ•¸ï¼Œå¦å‰‡è«‹é¿å…é‡è¤‡å‘½åè®Šæ•¸ asyncData æ˜¯åœ¨ server ç«¯ã€è·¯ç”±æ›´æ–°å‰å³èª¿ç”¨ï¼Œç”±æ–¼æ˜¯åœ¨ç€è¦½å™¨æ¸²æŸ“å‰çš„ç”Ÿå‘½é€±æœŸï¼Œå› æ­¤ç„¡æ³•ä½¿ç”¨ loading placeholderï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨ç€è¦½å™¨ç›¸é—œ API fetchNuxt v2.12 æ–°å¢åŠŸèƒ½ï¼ŒåŠŸèƒ½é¡ä¼¼ asyncData ï¼Œåœ¨ç•«é¢æ¸²æŸ“å‰ï¼ŒåŒæ™‚æ–¼ server ç«¯è·Ÿ client ç«¯çš„ç”Ÿå‘½é€±æœŸï¼Œå¯ä»¥ä½¿ç”¨æ–¼ä»»ä¸€ .vue é é¢ï¼Œç”±æ–¼æ˜¯åœ¨ Vue created ä¹‹å¾Œï¼Œå› æ­¤å¯ä»¥å–å¾— thisï¼Œåˆæ¬¡è¼‰å…¥é é¢æ™‚ï¼Œfetch æœƒåœ¨ server ç«¯åŸ·è¡Œï¼Œå¦‚æœæ˜¯é€é &lt;nuxt-link&gt; é€²è¡Œè·¯ç”±åˆ‡æ›ï¼Œfetch åœ¨ client ç«¯åŸ·è¡Œï¼Œå› æ­¤å¯ä»¥åœ¨æ­¤ç”Ÿå‘½é€±æœŸåŠ å…¥ loading æ•ˆæœ &lt;nuxt-link&gt; ç‚º Nuxt çš„è·¯ç”±åˆ‡æ›å…ƒä»¶ï¼Œç›¸ç•¶æ–¼ Vue.js çš„ &lt;router-link&gt; ï¼Œå› æ­¤æˆ‘å€‘åªèƒ½ä½¿ç”¨å…§éƒ¨é€£çµï¼Œå¤–éƒ¨é€£çµå¿…é ˆä½¿ç”¨ &lt;a&gt; æ¨™ç±¤ï¼Œé€é &lt;nuxt-link&gt; åˆ‡æ›è·¯ç”±ï¼Œæœƒè¢«è¦–ç‚º SPA é é¢è·³è½‰ ä»¥ä¸‹èªªæ˜ä½¿ç”¨æ–¹å¼ &lt;template&gt; &lt;ul&gt; &lt;li v-for=\"(post, key) in posts\" :key=\"key\"&gt; {{ post }} &lt;/li&gt; &lt;/ul&gt;&lt;/template&gt;&lt;script&gt;export default { data() { return { posts: [] } }, async fetch() { const { data } = await this.$axios.$get('/api/posts'); this.posts = data; }}&lt;/script&gt; å¦‚æœè¦é‡è¤‡è§¸ç™¼ fetch ç”Ÿå‘½é€±æœŸï¼Œå¯ä»¥ä½¿ç”¨ this.$fetch ä¾†å‘¼å«ï¼š &lt;template&gt; &lt;div&gt; &lt;ul&gt; &lt;li v-for=\"(post, key) in posts\" :key=\"key\"&gt; {{ post }} &lt;/li&gt; &lt;/ul&gt; &lt;button @click=\"$fetch\"&gt;é‡æ–°å–å¾—è²¼æ–‡&lt;/button&gt; &lt;/div&gt;&lt;/template&gt; å¦‚æœæˆ‘å€‘å¸Œæœ› fetch åªåœ¨ client ç«¯é‹è¡Œï¼Œå¯ä»¥åŠ ä¸Š fetchOnServer: falseï¼ˆé è¨­ trueï¼‰ å–å¾— fetch ç‹€æ…‹æˆ‘å€‘å¯ä»¥é€é this.$fetchState å–å¾— fetch ç•¶å‰åŸ·è¡Œç‹€æ…‹ï¼Œæœ‰ä»¥ä¸‹åƒæ•¸ï¼š pendingï¼šBoolean / æ˜¯å¦åŸ·è¡Œå®Œæˆï¼Œå¯ä»¥åœ¨æ­¤åŠ å…¥ loading æ•ˆæœï¼ˆclient ç«¯ï¼‰ errorï¼šnull or Error ç‰©ä»¶ / åˆ¤æ–·æ˜¯å¦ç™¼ç”ŸéŒ¯èª¤ timestampï¼šæ•´æ•¸ / æœ€å¾Œä¸€æ¬¡åŸ·è¡Œæ™‚é–“ï¼ˆæ­é… activated ä½¿ç”¨ï¼‰ ç¯„ä¾‹ï¼š &lt;template&gt; &lt;div&gt; &lt;p v-if=\"$fetchState.pending\"&gt;Loading...&lt;/p&gt; &lt;p v-if=\"$fetchState.error\"&gt;æœ‰æ±è¥¿å‡ºéŒ¯äº†&lt;/p&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default { data() { return { posts: [] } }, activated() { // æ¯ 30 ç§’è‡ªå‹•å‘¼å« fetch if (this.$fetchState.timestamp &lt;= Date.now() - 30000) { this.$fetch() } }, async fetch() { const { data } = await this.$axios.$get('/api/posts'); this.posts = data; }}&lt;/script&gt; ç”Ÿå‘½é€±æœŸåŸ·è¡Œé †åºæ¥è‘—æˆ‘å€‘å¾ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·è§€å¯Ÿç”Ÿå‘½é€±æœŸåŸ·è¡Œé †åº asyncData() { console.log('asyncData');},fetch() { console.log('fetch');},beforeCreate() { console.log('beforeCreate');},created() { console.log('created');},beforeMount() { console.log('beforeMount');} å¯ä»¥ç™¼ç¾ï¼Œcreated è·Ÿ beforeCreate é€™å…©å€‹ Vue.js ç”Ÿå‘½é€±æœŸæœƒåŒæ™‚å‡ºç¾åœ¨ server ç«¯è·Ÿ client ç«¯ï¼Œå¦‚æœè¦é¿å…æ–¹æ³•è¢«é‡è¤‡åŸ·è¡Œï¼Œå¯ä»¥é€™æ¨£åšï¼š åŠ ä¸Š process.client åˆ¤æ–· created(){ if (process.client){ // åŸ·è¡Œå…§å®¹ }} ä½¿ç”¨ Nuxt fetch ç”Ÿå‘½é€±æœŸ ä½¿ç”¨ Vue beforeMount ç”Ÿå‘½é€±æœŸ åƒè€ƒæ–‡ç« ï¼š https://stackoverflow.com/questions/60411436/nuxtjs-page-is-created-twice https://happy9990929.github.io/2021/09/10/vue-nuxt-lifecycle-hooks/","link":"/2022/11/24/nuxt/nuxt-lifecycle/"},{"title":"Nuxt.js Meta Tags and SEO","text":"ç‰ˆæœ¬ï¼šnuxt 2.15.8 åœ¨ Vue.js å°ˆæ¡ˆï¼Œæˆ‘å€‘å¯ä»¥ç›´æ¥åœ¨ index.html &lt;head&gt; è¨­å®šå…¨ç«™å…±ç”¨çš„ meta tagsï¼Œé‚£åœ¨ Nuxt åˆè©²æ€éº¼è¨­å®šå‘¢ï¼Ÿ Nuxt.js è—‰ç”± vue-meta ä¾†æ›´æ–°æ‡‰ç”¨å…§çš„ head è¨­å®šè·Ÿ meta å±¬æ€§ï¼Œä½¿ç”¨ create-nuxt-app å»ºæ§‹å°ˆæ¡ˆæœƒè‡ªå‹•å®‰è£ï¼Œæˆ‘å€‘å¯ä»¥åœ¨é é¢å®šç¾©ä¸åŒçš„å…§å®¹ï¼Œå¹«åŠ©æœå°‹å¼•æ“çˆ¬èŸ²æŒæ¡é é¢å…§å®¹ï¼Œæå‡ SEOã€‚ å…¨åŸŸé…ç½®export default { head: { title: 'my website title', meta: [ { charset: 'utf-8' }, { name: 'viewport', content: 'width=device-width, initial-scale=1' }, { hid: 'description', name: 'description', content: 'my website description' }, { hid: 'og:title', property: 'og:title', content: 'my website title' } ], link: [ { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' } ] }} æˆ‘å€‘å¯ä»¥çœ‹åˆ° head è‡ªå‹•æ¸²æŸ“ï¼š &lt;head&gt; &lt;title&gt;my website title&lt;/title&gt; &lt;meta data-n-head=\"ssr\" charset=\"utf-8\"&gt;&lt;/head&gt; ç‚ºäº†é¿å…å…ƒä»¶å…§ å±€éƒ¨é…ç½® head é€ æˆ meta tags é‡è¤‡ï¼Œéœ€åŠ ä¸Š hid keyï¼Œä¸¦è³¦äºˆå”¯ä¸€å€¼ï¼Œé€™æ¨£ç•¶å…ƒä»¶å®šç¾©ç›¸åŒ hid çš„ meta æ¨™ç±¤ï¼Œvue-meta æœƒè‡ªå‹•è¦†è“‹æ‰ å…¨åŸŸé…ç½® å±€éƒ¨é…ç½®ä»¥ç‰©ä»¶å®šç¾©ï¼š export default { head: { title: 'about-us', meta: [ { hid: 'description', name: 'description', content: 'about-us' } ] }} å¦‚æœéœ€è¦é€é this ä¾†å–å¾— meta è³‡æ–™ï¼Œéœ€è¦èª¿æ•´ç‚º function returnï¼š export default { data() { return { seo: { title: 'about-us', description: 'about-us' } } }, head() { return { title: this.seo.title, meta: [ { hid: 'description', name: 'description', content: this.seo.description } ] } }} åƒè€ƒæ–‡ç« ï¼š https://nuxtjs.org/docs/features/meta-tags-seo/","link":"/2022/12/10/nuxt/nuxt-meta-tags/"},{"title":"Nuxt.js æ›¿ç¶²ç«™å¢åŠ  sitemap ç¶²ç«™åœ°åœ–","text":"ç‰ˆæœ¬ï¼šnuxt 2.15.8 ç•¶æˆ‘å€‘çš„æ–°ç¶²ç«™ä¸Šç·šï¼Œå¤–éƒ¨é€£çµå°‘ï¼Œæˆ–æ˜¯ç¶²ç«™è¦æ¨¡å¾ˆå¤§æ™‚ï¼Œé€é sitemap ç¶²ç«™åœ°åœ–ï¼Œå¯ä»¥è®“ google æœå°‹å¼•æ“çˆ¬èŸ²å¯ä»¥æ›´å¿«é€Ÿçš„äº†è§£æˆ‘å€‘çš„ç¶²ç«™ä¸Šæœ‰å“ªäº›ç¶²é ä¸¦åŠ ä»¥æ”¶éŒ„ï¼Œä¸¦å»ºç«‹ç´¢å¼•ï¼Œæå‡ç¶²é å‡ºç¾çš„æ©Ÿç‡ã€‚ æˆ‘å€‘å¯ä»¥é€é @nuxtjs/sitemap ä¾†å¿«é€Ÿå»ºç«‹ sitemapï¼ŒåŸ·è¡Œï¼šnpm i @nuxtjs/sitemap åœ¨ config è³‡æ–™å¤¾æ–°å¢ sitemap.js æª”æ¡ˆï¼Œæ¥è‘—åœ¨ nuxt.config.js é…ç½®ï¼š import sitemap from './config/sitemap';export default { modules: [ '@nuxtjs/sitemap', ], sitemap: sitemap} æ¥è‘—ç§»å‹•åˆ°åˆ° config/sitemap.js é€²è¡Œè¨­å®šã€‚ sitemap é¸é …èªªæ˜ï¼š pathï¼šè¨­å®š sitemap åç¨±ï¼Œé è¨­ç‚º ****/sitemap.xml hostnameï¼šç¶²ç«™ domain cacheTimeï¼šsitemap æ›´æ–°çš„é »ç‡ï¼ˆé è¨­ç‚º 1000 * 60 * 15 15 åˆ†é˜ï¼‰ gzipï¼šæ˜¯å¦ç”Ÿæˆå£“ç¸®æª”ï¼Œé è¨­ false excludeï¼šæ’é™¤è¢«åŠ é€² sitemap çš„é é¢ï¼ˆé™£åˆ—ï¼‰ sitemap: { exclude: [ '/guideline', '/sample/**' ]} defaultsï¼šé è¨­è¨­å®šï¼ˆè‡ªå‹•å¸¶å…¥ routesï¼‰ sitemap: { defaults: { changefreq: 'daily', // æ›´æ–°é »ç‡ priority: 0.8, // å„ªå…ˆåº¦ lastmod: new Date() // æœ€å¾Œæ›´æ–°æ™‚é–“ }} filterï¼šç¯©é¸è·¯å¾‘ï¼ˆfunctionï¼‰ sitemap: { filter({ routes }) { return routes.map(route =&gt; { // è¨­å®šé¦–é å„ªå…ˆåº¦ç‚º 1 if (route.url === '/') { route.priority = 1; } return route; }); }} routesï¼šåŠ å…¥è·¯å¾‘ï¼ˆæœ¬ç¯‡é‡é»ï¼Œä»¥ä¸‹è©³ç´°èªªæ˜ï¼‰ Routes è¨­å®š@nuxtjs/sitemap æœƒè‡ªå‹•åŠ å…¥ éœæ…‹è·¯ç”± é é¢ï¼Œä½† å‹•æ…‹è·¯ç”± å¿…é ˆæ‰‹å‹•åŠ å…¥ -| pages/---| index.vue --&gt; static route---| about.vue --&gt; static route---| users/-----| _id.vue --&gt; dynamic route åŠ å…¥å‹•æ…‹è·¯ç”±æ–¹æ³•ï¼š æ‰‹å‹•åŠ å…¥ï¼ˆä½¿ç”¨é™£åˆ—ï¼‰ sitemap: { routes: [ { url: '/users/1', changefreq: 'daily', priority: 0.6, lastmod: new Date() }, { url: '/users/2', changefreq: 'daily', priority: 0.6, lastmod: new Date() } ]} é€é API ä¸²æ¥åŠ å…¥ï¼ˆä½¿ç”¨ function å›å‚³ promiseï¼‰ ç¯„ä¾‹æœƒä½¿ç”¨ @nuxtjs/axios é€²è¡Œ API ä¸²æ¥ï¼ŒåŸ·è¡Œï¼šnpm i @nuxtjs/axios sitemap: { routes: async () =&gt; { const { data } = await axios.get('https://test/api/sitemap'); return data.map(user =&gt; { return { url: `/users/${user.id}`, changefreq: 'daily', priority: 0.6, lastmod: new Date() } }); }} å°‡ä¸Šè¿°è¨­å®šåˆä½µèµ·ä¾†ï¼š const axios = require('axios');const sitemap = { path: '/sitemap.xml', // sitemap åç¨± hostname: 'https://test.com', // domain cacheTime: 1000 * 60 * 60 * 24, // update frequency of the day defaults: { changefreq: 'daily', priority: 0.8, lastmod: new Date() }, filter({ routes }) { return routes.map(route =&gt; { if (route.url === '/') { route.priority = 1; } return route; }); } routes: async () =&gt; { const { data } = await axios.get('https://test.com/api/sitemap'); return data.map(user =&gt; { return { url: `/users/${user.id}`, changefreq: 'daily', priority: 0.6, lastmod: new Date() } }); }};export default sitemap; æ¥è‘—åœ¨é é¢ä¸Šè¼¸å…¥ hostname/sitemap.xmlï¼ˆEXï¼šhttps://test.com/sitemap.xmlï¼‰ï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘å€‘çš„ sitemap æª”æ¡ˆå›‰ ğŸ™Œ åƒè€ƒæ–‡ç« ï¼š https://www.hellosanta.com.tw/knowledge/category-13/post-236 https://sitemap.nuxtjs.org/usage/sitemap-options","link":"/2022/12/15/nuxt/nuxt-sitemap/"},{"title":"Nuxt.js VueX Store æ­é… vuex-persistedstate ç‹€æ…‹ä¿å­˜å·¥å…·","text":"ç‰ˆæœ¬ï¼šnuxt 2.15.8 å‰æƒ…æè¦ä¸€ä¸‹ï¼Œåœ¨ Vue çš„å°ˆæ¡ˆä¸‹ï¼Œå¸¸æœƒéœ€è¦åšçˆ¶å­å…ƒä»¶æˆ–æ˜¯é é¢ä¹‹é–“çš„æºé€šå‚³å€¼ï¼Œå¦‚æœèªªåªæ˜¯å–®å±¤ï¼ˆexï¼šçˆ¶å…ƒä»¶ â†’ å­å…ƒä»¶ã€å­å…ƒä»¶ â†’ çˆ¶å…ƒä»¶ã€é é¢ â†’ é é¢ï¼‰ï¼Œæˆ‘å€‘å¯ä»¥å¾ˆç°¡å–®çš„ä½¿ç”¨ props ã€ emit æˆ– event bus å³å¯ï¼Œä½†åœ¨å¤§å‹å°ˆæ¡ˆï¼Œå…±ç”¨è³‡æ–™å°±ä¸æ˜¯å¦‚æ­¤å–®ç´”ï¼Œå¯èƒ½æœƒæœ‰å…ƒä»¶å…§å«å…ƒä»¶ã€å¤šå±¤ç´šçš„æºé€šï¼Œå¦‚æœåªç”¨ä¸Šè¿°æ–¹æ³•ï¼Œå°æ–¼é–‹ç™¼åŠé™¤éŒ¯éƒ½ä¸ä¾¿åˆ©ï¼Œå¦‚ä¸‹åœ–ç¯„ä¾‹ï¼Œå…ƒä»¶ 1-1 è·Ÿå…ƒä»¶ 2-1 çš„æºé€šç›¸å°è¤‡é›œã€‚ ç‚ºäº†è™•ç†é«˜é›£åº¦æºé€šï¼ŒVueX ç‹€æ…‹ç®¡ç†å·¥å…·å°±èª•ç”Ÿäº†ï¼Œé‚£éº¼åœ¨ Nuxt å°ˆæ¡ˆä¸‹åˆè©²æ€éº¼ä½¿ç”¨å‘¢ï¼Ÿ é¦–å…ˆå…ˆå®‰è£ VueX å¥—ä»¶ npm i vuex@3.6.2 Nuxt v2.x å¿…é ˆæ­é… VueX v3.x æ¥è‘—åœ¨å°ˆæ¡ˆæœ€å¤–å±¤æ–°å¢ store è³‡æ–™å¤¾ï¼Œä¸¦åœ¨è£¡é¢å»ºç«‹ .js æª”ï¼Œç¯„ä¾‹ä½¿ç”¨ userInfo.js // store/userInfo.jsexport const state = () =&gt; {};export const getters = {};export const mutations = {};export const actions = {}; Nuxt å°ˆæ¡ˆæœƒè‡ªå‹•å‰µå»ºå¯¦ä¾‹ new Vuex.Store()ï¼Œå°‡ store æª”æ¡ˆåŒ…è£é€²æ¨¡çµ„å…§ï¼Œåƒé€™æ¨£ï¼š new Vuex.Store({ modules: { userInfo: { namespaced: true, state: () =&gt; {}, getters: {}, mutations: {}, actions: {} } }}); VueX åŸºæœ¬æ¶æ§‹ï¼š stateï¼šç”¨ä»¥å„²å­˜ç‹€æ…‹ï¼ŒåŠŸèƒ½åŒ .vue æª”å…§çš„ dataï¼Œå› æ­¤æœƒä½¿ç”¨æ–¹æ³•ä¾†åŒ…è£ï¼Œä¸¦ return å…§å®¹ gettersï¼šåŠŸèƒ½åŒ computedï¼Œç”¨ä»¥è¨ˆç®— state å…§çš„ç‹€æ…‹ï¼Œä¸èƒ½ç›´æ¥æ”¹è®Š state mutationsï¼šç”¨ä¾†æ›´æ”¹ stateï¼Œä¸èƒ½ä½¿ç”¨éåŒæ­¥èªæ³• actionsï¼šéåŒæ­¥èªæ³•åªèƒ½å¯«åœ¨ actionsï¼Œä¸èƒ½ç›´æ¥æ”¹è®Š stateï¼Œéœ€é€é mutations æ”¹è®Š state æ¥è‘—ä¾†æ›¿ store åŠ å…¥ä¸€äº›å…§å®¹å§ // store/userInfo.jsexport const state = () =&gt; ({ count: 0, products: [ { name: 'food', onSale: false }, { name: 'drink', onSale: true } ]});export const getters = { onSaleProducts(state) { return state.products.filter(item =&gt; item.onSale); }};export const mutations = { increment(state, number) { state.count += number; }};export const actions = { incrementAsync({ commit }, number) { setTimeout(() =&gt; { commit('increment', number); }, 1000); }}; å¦‚æœè¦åœ¨é é¢ä½¿ç”¨ store çš„å…§å®¹ï¼Œæœ‰ä»¥ä¸‹å…©ç¨®æ–¹å¼ï¼š é€é this.$store æ“ä½œVueX å°‡ store æ³¨å…¥åˆ° Vue å¯¦ä¾‹ï¼Œå› æ­¤æˆ‘å€‘é€é $store å°±å¯ä»¥å–å¾—ç›¸é—œè³‡æ–™åŠæ–¹æ³•ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼ˆç¯„ä¾‹é é¢ pages/about.vueï¼‰ï¼š // pages/about.vueexport default { name: 'About', computed: { count() { // state return this.$store.state.userInfo.count; } onSaleProducts() { // getters return this.$store.getters['userInfo/onSaleProducts']; } }, methods: { increment(number) { // mutations this.$store.commit('userInfo/increment', number); }, incrementAsync(number) { // actions this.$store.dispatch('userInfo/incrementAsync', number); } }} ä½†æ˜¯æ¯ä¸€ç­†è³‡æ–™æˆ–æ˜¯æ–¹æ³•ï¼Œéƒ½é€é this.$store å–å¾—ï¼Œç¨‹å¼ç¢¼å†—é•·ï¼Œå¦‚æœä»Šå¤©æˆ‘å€‘æœ‰ä¸‰å€‹ store å„²å­˜åº«ï¼Œæ˜“è®€æ€§åˆæ›´ä½äº†ï¼Œé›£é“æ²’æœ‰ç°¡å–®çš„ä½¿ç”¨æ–¹å¼å—ï¼Ÿ é€éè¼”åŠ©å‡½å¼VueX æä¾›ä¸€ç³»åˆ—è¼”åŠ©å‡½å¼ï¼ˆmapState, mapGetters, mapMutations, mapActionsï¼‰ï¼Œå¯ä»¥å¹«åŠ©æˆ‘å€‘æ›´ç°¡æ˜“çš„å–å¾— store å…§å®¹ï¼Œé¦–å…ˆå¿…é ˆå¾ VueX å¼•å…¥è¼”åŠ©å‡½å¼ï¼Œæ¥è‘—ä¾†æ”¹å¯« about.vue é é¢ // pages/about.vueimport { mapState, mapGetters, mapMutations, mapActions } from 'vuex';export default { name: 'About', computed: { ...mapState('userInfo', [ 'count' ]), ...mapGetters('userInfo', [ 'onSaleProducts' ]) }, methods: { ...mapMutations('userInfo', [ 'increment' ]), ...mapActions('userInfo', [ 'incrementAsync' ]) }} é€éè¼”åŠ©å‡½å¼ï¼Œæ¸›å°‘è¨±å¤šç¨‹å¼ç¢¼ï¼Œé–±è®€èµ·ä¾†ä¹Ÿè¼•é¬†è¨±å¤šã€‚ VueX ç›¸ç•¶æ–¹ä¾¿ï¼Œä½†é‚„æ˜¯å­˜åœ¨ä¸€å€‹å•é¡Œï¼Œå°±æ˜¯ç•¶é é¢é‡æ–°æ•´ç†çš„æ™‚å€™ï¼Œæœƒå›å¾©åˆ°åˆå§‹ç‹€æ…‹ã€‚ æŸäº›æƒ…å¢ƒä¸‹ï¼Œæˆ‘å€‘éœ€è¦ä¿ç•™æ›´æ–°å¾Œçš„è³‡æ–™ï¼Œä¾‹å¦‚ç™»å…¥å¾Œå„²å­˜ä½¿ç”¨è€…è³‡è¨Šåˆ° storeï¼Œé‡æ•´é é¢å¾Œè³‡æ–™è¢«æ¸…ç©ºï¼Œä½¿ç”¨è€…å¿…é ˆé‡æ–°ç™»å…¥ã€‚ç‚ºäº†è§£æ±ºé€™å€‹å•é¡Œï¼Œæˆ‘å€‘å¯ä»¥å°‡è³‡æ–™å„²å­˜æ–¼ localStorageï¼Œå¾…ç•«é¢é‡æ•´å¾Œå†å°‡è³‡æ–™å–å›æ”¾å…¥ storeï¼Œæˆ–è€…æ˜¯ä½¿ç”¨å¥—ä»¶ vuex-persistedstate 2022.02.04 vuex-persistedstate å¥—ä»¶å·²ä¸ç¹¼çºŒç¶­è­·æ›´æ–° æ¥ä¸‹ä¾†èªªæ˜å¦‚ä½• Nuxt å°ˆæ¡ˆå¦‚ä½•æ­é… vuex-persistedstateï¼Œå­˜æ”¾åœ¨ localStorage çš„å…§å®¹ï¼Œå¯ä»¥è¼•æ˜“åœ°è¢«è®€å–ï¼Œå› æ­¤æˆ‘å€‘éœ€è¦å°‡å…§å®¹åŠ å¯†ï¼ˆæ­é…å¥—ä»¶ secure-lsï¼‰ é¦–å…ˆå®‰è£å¥—ä»¶ï¼šnpm i vuex-persistedstate åŠåŠ å¯†å¥—ä»¶ï¼šnpm i secure-lsï¼Œæ¥è‘—æ–¼ plugins å¢åŠ æª”æ¡ˆï¼Œç¯„ä¾‹ä½¿ç”¨ persistedstate.js // plugins/persistedstate.jsimport createPersistedState from 'vuex-persistedstate';import SecureLS from 'secure-ls';const ls = new SecureLS({ encodingType: 'aes', // åŠ å¯†æ–¹å¼ï¼Œé è¨­ base64 isCompression: false, // æ˜¯å¦å£“ç¸®æ•¸æ“š encryptionSecret: process.env.APP_KEY // åŠ å¯† key});export default ({ store, isHMR }) =&gt; { if (isHMR) { // é¿å…åœ¨ç†±æ›´æ–°çš„æ™‚å€™é‡è¤‡è§¸ç™¼(npm run dev) return; } window.onNuxtReady(() =&gt; { createPersistedState({ key: 'test', // è‡ªè¨‚ localStorage key storage: { getItem: key =&gt; ls.get(key), setItem: (key, value) =&gt; ls.set(key, value), removeItem: key =&gt; ls.remove(key) } })(store); });}; æ¥è‘—é…ç½®åˆ° nuxt.config.js å…§ // nuxt.config.jsexport default { plugins: [ { src: '@/plugins/persistedstate', ssr: false } ]} é€™æ¨£ä¸€ä¾†å³ä½¿ç•«é¢é‡æ•´ï¼Œstore ä¹Ÿå¯ä»¥é †åˆ©ä¿å­˜è³‡æ–™ï¼Œåœ¨ localStorage æŸ¥çœ‹ test å…§å®¹ä¹Ÿç¢ºå¯¦è¢«åŠ å¯†äº†ï¼ åƒè€ƒæ–‡ç« ï¼š https://medium.com/itsems-frontend/vue-vuex1-state-mutations-364163b3acac https://chiafangsung.medium.com/ä½¿ç”¨-vuex-persistedstate-ç¶­æŒ-vuex-ç‹€æ…‹-f0d7c522c73a","link":"/2022/11/22/nuxt/nuxt-vuex-store/"},{"title":"Nuxt.js å¥—ä»¶æ‡‰ç”¨ï¼šSwiper è£½ä½œè¼ªæ’­å‹•ç•«","text":"ç‰ˆæœ¬ï¼šnuxt 2.15.8 ç¶²ç«™é–‹ç™¼å¸¸ä½¿ç”¨åˆ°è¼ªæ’­åŠŸèƒ½ï¼ŒSwiper æ˜¯ä¸€æ¬¾åŸºæ–¼ js é–‹ç™¼ã€åŠŸèƒ½å®Œæ•´å¯¦ç”¨æ€§é«˜çš„è¼ªæ’­å¥—ä»¶ï¼Œä»Šå¤©ä¾†ä»‹ç´¹å¦‚ä½•åœ¨ Nuxt.js å°ˆæ¡ˆå…§æ‡‰ç”¨ï¼Œæˆ‘å€‘æœƒæ­é… Vue æ•´åˆå¥—ä»¶ vue-awesome-swiper ä½¿ç”¨ å¥—ä»¶å®‰è£ï¼š npm i swiper@6.8.4 npm i vue-awesome-swiper@4.1.1 å®˜æ–¹æ–‡ä»¶ç‰ˆæœ¬èªªæ˜ï¼šVue2 æ­é… Swiper 5-6 ï¼†&nbsp;vue-awesome-swiper@4.1.1å¦‚æœæ˜¯ Vue3 æ­¤å¥—ä»¶å·²ä¸æ”¯æ´ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ Swiper Vue ç‰ˆæœ¬ æ¥ä¸‹ä¾†å…¨åŸŸè¨»å†Š Swiper å…ƒä»¶ï¼Œåœ¨ plugins è³‡æ–™å¤¾æ–°å¢æª”æ¡ˆï¼ˆç¯„ä¾‹å‘½å swiper.jsï¼‰ // plugins/swiper.jsimport Vue from 'vue';import Swiper, { /* swiper modules... */ } from 'swiper';import VueAwesomeSwiper from 'vue-awesome-swiper';Swiper.use([ /* swiper modules... */ ]);export default () =&gt; { Vue.use(VueAwesomeSwiper);}; ä¸Šè¿° swiper modules å€å¡Šå¯ä»¥æ›¿æ›éœ€è¦çš„æ¨¡çµ„ï¼ˆæ¨¡çµ„é¸é …ï¼‰ï¼Œç¯„ä¾‹ä½¿ç”¨ Navigation, Pagination ç„¶å¾Œåœ¨ nuxt.config.js é€²è¡Œé…ç½® // nuxt.config.jsexport default { css: [ { src: 'swiper/swiper-bundle.min.css' } ], plugins: [ { src: '@/plugins/swiper', mode: 'client' } ]} é‡é ­æˆ²ä¾†äº†ï¼Œæˆ‘å€‘å¯ä»¥é€éå…©ç¨®æ–¹å¼åœ¨é é¢ä¸Šä½¿ç”¨ï¼š swiper components å…ƒä»¶&lt;template&gt; &lt;client-only&gt; &lt;div&gt; &lt;swiper class=\"swiper\" :options=\"swiperOption\" ref=\"bannerSwiper\"&gt; &lt;swiper-slide&gt;banner 1&lt;/swiper-slide&gt; &lt;swiper-slide&gt;banner 2&lt;/swiper-slide&gt; &lt;swiper-slide&gt;banner 3&lt;/swiper-slide&gt; &lt;swiper-slide&gt;banner 4&lt;/swiper-slide&gt; &lt;swiper-slide&gt;banner 5&lt;/swiper-slide&gt; &lt;/swiper&gt; &lt;div class=\"swiper-button-prev\" slot=\"button-prev\"&gt;&lt;/div&gt; &lt;div class=\"swiper-button-next\" slot=\"button-next\"&gt;&lt;/div&gt; &lt;/div&gt; &lt;/client-only&gt;&lt;/template&gt;&lt;script&gt;export default { data() { return { swiperOption: { slidesPerView: 3, spaceBetween: 5, grabCursor: true } } }};&lt;/script&gt; swiper è¨­å®šé …ç›®è«‹è¦‹æ–‡ä»¶ï¼Œå¦‚æœå°ˆæ¡ˆç‚º server-side renderï¼Œä½¿ç”¨æ­¤æ–¹å¼å¤–å±¤éœ€åŠ ä¸Š &lt;client-only /&gt; ï¼Œå¦å‰‡åœ¨ server ç«¯æœƒå› ç‚º dom å…ƒç´ ç„¡æ³•è¢«è§£æè€Œå ±éŒ¯ [Vue warn]: The client-side rendered virtual DOM tree is not matching server-rendered content. This is likely caused by incorrect HTML markup, for example nesting block-level elements inside &lt;p&gt;, or missing &lt;tbody&gt;. Bailing hydration and performing full client-side render. æˆ‘å€‘å¯ä»¥ä½¿ç”¨ this.$refs.bannerSwiper.$swiper ä¾†å–å¾— Swiper å¯¦é«”ä¸¦ä½¿ç”¨ç›¸é—œæ–¹æ³• æ ¹æ“šæ–‡ä»¶èªªæ˜ï¼Œ&lt;client-only /&gt; çš„å…ƒç´ æœƒåœ¨ mounted ç”Ÿå‘½é€±æœŸæ‰åŸ·è¡Œï¼Œå› æ­¤åœ¨ mounted å‘¼å« $refs å¯èƒ½æœƒå¾—åˆ°å–ä¸åˆ°å…§å®¹ï¼ˆå³ä½¿ä½¿ç”¨ $nextTick ä¹Ÿå¯èƒ½å–ä¸åˆ°ï¼‰ï¼Œå¯ä»¥é€™æ¨£åŒ…è£ï¼š export default { mounted(){ this.getSwiperInstance() }, methods: { getSwiperInstance() { this.$nextTick(() =&gt; { if (this.$refs.bannerSwiper) { this.$refs.bannerSwiper.$swiper.slideTo(2); } else { this.getSwiperInstance(); } }); } }} directive æŒ‡ä»¤å¦‚æœ Swiper å…§å®¹éœ€è¦è¢«æœå°‹å¼•æ“çˆ¬èŸ²è®€å–ï¼Œå¯ä»¥åˆ©ç”¨ Vue directive æ–¹æ³•ï¼Œé€™æ¨£å°±å¯ä»¥ä½¿ç”¨èƒ½è¢«ç€è¦½å™¨è§£æçš„ dom å…ƒç´ ä¾†åŒ…è£ swiperï¼Œè¦‹ä»¥ä¸‹ç¯„ä¾‹ &lt;template&gt; &lt;div class=\"banner-wrap mx-auto py-4 px-3\"&gt; &lt;div v-swiper:bannerSwiper=\"swiperOption\" class=\"swiper\"&gt; &lt;div class=\"swiper-wrapper\"&gt; &lt;div class=\"swiper-slide\"&gt;banner 1&lt;/div&gt; &lt;div class=\"swiper-slide\"&gt;banner 2&lt;/div&gt; &lt;div class=\"swiper-slide\"&gt;banner 3&lt;/div&gt; &lt;div class=\"swiper-slide\"&gt;banner 4&lt;/div&gt; &lt;div class=\"swiper-slide\"&gt;banner 5&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default { data() { return { swiperOption: { slidesPerView: 3, spaceBetween: 5, grabCursor: true } } }, mounted() { this.bannerSwiper.slideTo(2, 500, false); }};&lt;/script&gt; å¦‚æœåŒä¸€å€‹é é¢æœ‰å¤šå€‹ Swipersï¼Œå¿…é ˆè¦é€éå‘½åï¼ˆ ex: v-swiper:bannerSwiper ï¼‰ä¾†é€²è¡Œç¶å®šï¼Œå¦å‰‡æœƒç„¡æ³•æ­£å¸¸æ“ä½œï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥é€éåç¨± this.bannerSwiper çš„å–å¾— Swiper å¯¦é«”ä¸¦ä½¿ç”¨ç›¸é—œæ–¹æ³•ï¼Œæ˜¯ä¸æ˜¯ç°¡å–®è¨±å¤šå‘¢ï¼ åƒè€ƒæ–‡ç« ï¼š https://github.com/surmon-china/surmon-china.github.io/blob/vue2/projects/vue-awesome-swiper/examples/00-typescript-composition-api.vue https://nuxtjs.org/docs/features/nuxt-components/#the-client-only-component https://ken551113.github.io/2019/11/26/Using-Vue-Awesome-Swiper-On-Nuxt/","link":"/2022/11/29/nuxt/nuxt-swiper/"},{"title":"Vue.js åœ–ç‰‡ä¸Šå‚³ä¸²æ¥å¾Œç«¯ APIï¼ˆè½‰æ›æˆbase64æ ¼å¼ï¼‰","text":"ç‰ˆæœ¬ï¼švue 2.6.14 é€™æ¬¡ä»‹ç´¹çš„ä¸Šå‚³æ­¥é©Ÿç‚ºï¼Œä½¿ç”¨è€…å¡«å¯«ä¸€ä»½è¡¨å–®ï¼Œåœ¨é¸å–æ¬²ä¸Šå‚³åœ–ç‰‡å¾Œï¼Œç³»çµ±æœƒå…ˆå°‡æª”æ¡ˆä¸Šå‚³è‡³é›²ç«¯è³‡æ–™åº«ï¼Œå¾…ä½¿ç”¨è€…ç¢ºèªæ•´ä»½è¡¨å–®å¡«å¯«ç„¡èª¤å¾Œï¼Œæ‰é€å‡ºè¡¨å–®ã€‚ æ“ä½œæ­¥é©Ÿï¼š é»æ“Š input é¸æ“‡æœ¬åœ°ç«¯åœ–ç‰‡ é€²è¡Œåœ–ç‰‡è½‰æ›ï¼ˆè½‰æˆ base64 æ ¼å¼ï¼‰ å‘¼å«å¾Œç«¯ api é€²è¡Œä¸Šå‚³ï¼ˆè‡³é›²ç«¯è³‡æ–™åº«ï¼‰ æˆåŠŸå›å‚³åœ–ç‰‡è·¯å¾‘ å°‡è©²è·¯å¾‘é¡¯ç¤ºæ–¼ç•«é¢é è¦½ HTMLèªªæ˜ï¼š acceptï¼šæª”æ¡ˆæ¥å—æ ¼å¼ &lt;input type=\"file\" ref=\"image-input\" accept=\"image/jpeg, image/png\" @change=\"changeImage()\" /&gt;&lt;img :src=\"image\" :alt=\"image\" /&gt; Javascripté»æ“Šåœ–ç‰‡è§¸ç™¼ changeImage æ–¹æ³•ï¼š æ³¨æ„ï¼švue èªæ³•ç³– v-model ç¶å®šçš„æ˜¯ v-on:input äº‹ä»¶ï¼Œå› æ­¤ input[type=file] ä¸é©ç”¨ èªªæ˜ï¼š FileReader ç‚º javascript ç‰©ä»¶ï¼Œèƒ½ä»¥éåŒæ­¥æ–¹å¼ï¼ˆåœ¨æ­¤ä½¿ç”¨åˆ° onload äº‹ä»¶ï¼‰è®€å–å„²å­˜åœ¨ç”¨æˆ¶ç«¯çš„æª”æ¡ˆå…§å®¹ï¼Œè®€å–æ ¼å¼å¯ç‚ºå¯&nbsp;File æˆ–&nbsp;Blob ç‰©ä»¶ readAsDataURL æ–¹æ³•æœƒè®€å–æŒ‡å®šçš„&nbsp;File æˆ–&nbsp;Blob ç‰©ä»¶ï¼Œè®€å–å®Œæˆå¾Œå°‡å…¶è½‰æ›æˆ base64 æ ¼å¼ changeImage() { const input = this.$refs['image-input']; const file = input.files[0]; // reset inputï¼Œé¿å…ä½¿ç”¨è€…é‡è¤‡é¸åŒä¸€æª”æ¡ˆç„¡æ³•è§¸ç™¼ change äº‹ä»¶ input.files = new DataTransfer().files; // æª¢æŸ¥åœ–ç‰‡æª”å¤§å° if (!this.checkFileSize(file)) { return; } // ä¸Šå‚³åœ–ç‰‡ this.uploadImage(file);} checkFileSize(file) { // é™åˆ¶ 1 MB if (file.size &gt; (1024 * 1024)) { this.$notify({ type: 'danger', text: 'æª”æ¡ˆå¤§å°ä¸å¯å¤§æ–¼ 1 MB' }); return false; } return true;} FileReader æ­£å¼ä¸Šå ´ï¼ uploadImage(file) { const reader = new FileReader(); reader.readAsDataURL(file); reader.addEventListener('load', async () =&gt; { const apiUrl = '/api/v1/image'; // api url const configData = { file }; const response = await this.$axios.$post(apiUrl, configData); this.image = response.image; });} æœ€å¾Œå°±å¯ä»¥æŠŠ api å‘¼å«æˆåŠŸå›å‚³å›ä¾†çš„åœ–ç‰‡è·¯å¾‘æ¸²æŸ“åœ¨ç•«é¢ä¸Šå•¦ï¼å¤§åŠŸå‘Šæˆã€‚","link":"/2022/11/03/vue/vue-upload-image/"}],"tags":[{"name":"nuxt","slug":"nuxt","link":"/tags/nuxt/"},{"name":"nuxt.js","slug":"nuxt-js","link":"/tags/nuxt-js/"},{"name":"vue","slug":"vue","link":"/tags/vue/"},{"name":"vue.js","slug":"vue-js","link":"/tags/vue-js/"},{"name":"ssr","slug":"ssr","link":"/tags/ssr/"},{"name":"axios","slug":"axios","link":"/tags/axios/"},{"name":"ckeditor","slug":"ckeditor","link":"/tags/ckeditor/"},{"name":"ckeditor 5","slug":"ckeditor-5","link":"/tags/ckeditor-5/"},{"name":"seo","slug":"seo","link":"/tags/seo/"},{"name":"meta tags","slug":"meta-tags","link":"/tags/meta-tags/"},{"name":"ga","slug":"ga","link":"/tags/ga/"},{"name":"gtm","slug":"gtm","link":"/tags/gtm/"},{"name":"create-nuxt-app","slug":"create-nuxt-app","link":"/tags/create-nuxt-app/"},{"name":"sitemap","slug":"sitemap","link":"/tags/sitemap/"},{"name":"vuex","slug":"vuex","link":"/tags/vuex/"},{"name":"nuxt-vuex","slug":"nuxt-vuex","link":"/tags/nuxt-vuex/"},{"name":"swiper","slug":"swiper","link":"/tags/swiper/"}],"categories":[{"name":"Nuxt","slug":"Nuxt","link":"/categories/Nuxt/"},{"name":"Vue","slug":"Vue","link":"/categories/Vue/"}]}